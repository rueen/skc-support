import{_ as ce,i as ie,r as f,a as $,j as re,b as h,d as l,c as o,w as n,e as i,k as r,o as c,F as R,l as U,m,h as p,t as v,g as z,n as y}from"./index-BwvjrgmS.js";import{A as w,g as de,i as pe,j as ve}from"./enums-Vx4wKXVy.js";import{g as L,p as F}from"./request-BmRi9MFl.js";const fe={class:"account content-container"},me={class:"table-container"},_e={class:"table-header"},ge={class:"left"},he={class:"right"},ye={key:0,class:"account-info"},ke={class:"home-url"},be={class:"link-text-container"},Ce=["href"],Se={class:"stats"},we={class:"stat-item"},xe={class:"stat-item"},Ie={key:1},Ne={class:"group-name"},je={__name:"list",setup(Ae){const{locale:P}=ie(),x=f(!1),d=f([]),k=f(!1),I=f(!1),_=f(""),g=$({current:1,pageSize:10,total:0,showTotal:e=>`共 ${e} 条`}),s=$({account:"",channelId:void 0,auditStatus:void 0,groupId:void 0}),O=f([]),B=f([]),K=[{title:"账号",dataIndex:"account",key:"account"},{title:"平台渠道",dataIndex:"channelName",key:"channelName"},{title:"账号信息",key:"accountInfo"},{title:"会员信息",key:"member"},{title:"审核状态",dataIndex:"auditStatus",key:"auditStatus"},{title:"操作",key:"action",fixed:"right",width:180}],D=f([{id:1,account:"test123",channelName:"抖音",channelId:1,homeUrl:"https://example.com/test123",fansCount:1e3,postsCount:50,memberNickname:"测试会员1",groupName:"群组1",auditStatus:w.PENDING}]),M=e=>{d.value=e},T=e=>de(pe,e,P.value),q=e=>ve[e],V=()=>{g.current=1,b()},H=()=>{s.account="",s.channelId=void 0,s.auditStatus=void 0,s.groupId=void 0,V()},J=e=>{Object.assign(g,{current:e.current,pageSize:e.pageSize}),b()},Q=async()=>{if(!d.value.length){r.warning("请选择要通过的账号");return}try{const e=await F("account.batchResolve",{ids:d.value});e.success?(r.success("操作成功"),d.value=[],b()):r.error(e.message)}catch(e){console.log(e)}},W=async()=>{if(!d.value.length){r.warning("请选择要拒绝的账号");return}_.value="",k.value=!0},X=e=>{d.value=[e.id],_.value="",k.value=!0},Y=async()=>{if(!_.value){r.error("请输入拒绝原因");return}I.value=!0;try{const e=await F("account.batchReject",{ids:d.value,reason:_.value});e.success?(r.success("操作成功"),d.value=[],k.value=!1,b()):r.error(e.message)}catch(e){console.log(e)}finally{I.value=!1}},b=async()=>{x.value=!0;try{const e=await L("account.list",{params:{page:g.current,pageSize:g.pageSize,...s}});e.success?(D.value=e.data.list,g.total=e.data.total):r.error(e.message)}finally{x.value=!1}},Z=async()=>{const e=await L("channel.list");e.success&&(O.value=e.data.list)},ee=async(e="")=>{try{const t=await L("group.list",{params:{page:1,pageSize:50,keyword:e}});t.success&&(B.value=t.data.list||[])}catch{r.error("获取群组列表失败")}},te=e=>{navigator.clipboard.writeText(e).then(()=>{r.success("复制成功")}).catch(()=>{r.error("复制失败")})};return re(()=>{b(),ee(),Z()}),(e,t)=>{const ae=i("a-input"),C=i("a-form-item"),N=i("a-select-option"),j=i("a-select"),S=i("a-button"),A=i("a-space"),ne=i("a-form"),oe=i("a-tag"),E=i("a-popconfirm"),le=i("a-table"),se=i("a-textarea"),ue=i("a-modal");return c(),h("div",fe,[l("div",me,[l("div",_e,[l("div",ge,[o(ne,{layout:"inline",model:s},{default:n(()=>[o(C,{label:"账号"},{default:n(()=>[o(ae,{value:s.account,"onUpdate:value":t[0]||(t[0]=a=>s.account=a),placeholder:"请输入账号","allow-clear":""},null,8,["value"])]),_:1}),o(C,{label:"平台渠道"},{default:n(()=>[o(j,{value:s.channelId,"onUpdate:value":t[1]||(t[1]=a=>s.channelId=a),placeholder:"请选择平台渠道",style:{width:"120px"},"allow-clear":""},{default:n(()=>[(c(!0),h(R,null,U(O.value,a=>(c(),m(N,{key:a.id,value:a.id},{default:n(()=>[p(v(a.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1}),o(C,{label:"审核状态"},{default:n(()=>[o(j,{value:s.auditStatus,"onUpdate:value":t[2]||(t[2]=a=>s.auditStatus=a),placeholder:"请选择审核状态",style:{width:"120px"},"allow-clear":""},{default:n(()=>[(c(!0),h(R,null,U(Object.values(z(w)),a=>(c(),m(N,{key:a,value:a},{default:n(()=>[p(v(T(a)),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1}),o(C,{label:"所属群组"},{default:n(()=>[o(j,{value:s.groupId,"onUpdate:value":t[3]||(t[3]=a=>s.groupId=a),placeholder:"请选择群组",style:{width:"120px"},"allow-clear":""},{default:n(()=>[(c(!0),h(R,null,U(B.value,a=>(c(),m(N,{key:a.id,value:a.id},{default:n(()=>[p(v(a.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1}),o(C,null,{default:n(()=>[o(A,null,{default:n(()=>[o(S,{type:"primary",onClick:V},{default:n(()=>t[6]||(t[6]=[p("查询")])),_:1}),o(S,{onClick:H},{default:n(()=>t[7]||(t[7]=[p("重置")])),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),l("div",he,[o(A,null,{default:n(()=>[o(S,{type:"primary",onClick:Q},{default:n(()=>t[8]||(t[8]=[p("批量通过")])),_:1}),o(S,{danger:"",onClick:W},{default:n(()=>t[9]||(t[9]=[p("批量拒绝")])),_:1})]),_:1})])]),o(le,{columns:K,"data-source":D.value,loading:x.value,pagination:g,"row-selection":{selectedRowKeys:d.value,onChange:M},onChange:J},{bodyCell:n(({column:a,record:u})=>[a.key==="accountInfo"?(c(),h("div",ye,[l("div",ke,[l("div",be,[t[11]||(t[11]=l("span",{class:"label"},"主页：",-1)),l("a",{href:u.homeUrl,target:"_blank",class:"link-text"},v(u.homeUrl),9,Ce),o(S,{type:"link",size:"small",onClick:G=>te(u.homeUrl)},{default:n(()=>t[10]||(t[10]=[p(" 复制 ")])),_:2},1032,["onClick"])])]),l("div",Se,[l("div",we,"粉丝数："+v(u.fansCount),1),l("div",xe,"发帖数："+v(u.postsCount),1)])])):y("",!0),a.key==="member"?(c(),h("div",Ie,[l("div",null,v(u.memberNickname),1),l("div",Ne,v(u.groupName),1)])):y("",!0),a.key==="auditStatus"?(c(),m(oe,{key:2,color:q(u.auditStatus)},{default:n(()=>[p(v(T(u.auditStatus)),1)]),_:2},1032,["color"])):y("",!0),a.key==="action"?(c(),m(A,{key:3},{default:n(()=>[u.auditStatus===z(w).PENDING?(c(),m(E,{key:0,title:"确定要通过该账号吗？",onConfirm:G=>e.handleResolve(u)},{default:n(()=>t[12]||(t[12]=[l("a",null,"通过",-1)])),_:2},1032,["onConfirm"])):y("",!0),u.auditStatus===z(w).PENDING?(c(),m(E,{key:1,title:"确定要拒绝该账号吗？",onConfirm:G=>X(u)},{default:n(()=>t[13]||(t[13]=[l("a",{class:"danger"},"拒绝",-1)])),_:2},1032,["onConfirm"])):y("",!0)]),_:2},1024)):y("",!0)]),_:1},8,["data-source","loading","pagination","row-selection"])]),o(ue,{open:k.value,"onUpdate:open":t[5]||(t[5]=a=>k.value=a),title:"拒绝原因",onOk:Y,confirmLoading:I.value},{default:n(()=>[o(se,{value:_.value,"onUpdate:value":t[4]||(t[4]=a=>_.value=a),placeholder:"请输入拒绝原因",rows:4},null,8,["value"])]),_:1},8,["open","confirmLoading"])])}}},Le=ce(je,[["__scopeId","data-v-d6c43b1b"]]);export{Le as default};
