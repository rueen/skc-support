import{_ as re,k as ce,r as m,d as F,e as y,f as c,c as a,w as t,g as o,h as pe,o as d,F as D,l as U,j as u,t as i,i as V,m as b,n as h,b as p}from"./index-DQpGSS2F.js";import{f as N,g as me,h as _e,i as fe}from"./enums-C8EG5C38.js";const ve={class:"task-audit content-container"},ke={class:"table-container"},ge={class:"table-header"},ye={class:"left"},be={class:"right"},he={key:1},Ne={class:"group-name"},Se=["onClick"],we={__name:"list",setup(Ce){const z=pe(),{locale:K}=ce(),I=m(!1),B=m(!1),S=m(!1),T=m(!1),w=m(""),_=m(null),v=m([]),s=F({taskName:"",channelId:void 0,auditStatus:void 0,groupId:void 0}),q=[{id:1,name:"抖音"},{id:2,name:"快手"}],H=[{id:1,name:"群组1"},{id:2,name:"群组2"},{id:3,name:"群组3"}],J=[{title:"任务名称",dataIndex:"taskName",key:"taskName"},{title:"平台渠道",dataIndex:"channelName",key:"channelName"},{title:"任务奖励",dataIndex:"reward",key:"reward"},{title:"会员信息",key:"member"},{title:"审核状态",dataIndex:"auditStatus",key:"auditStatus"},{title:"操作",key:"action",fixed:"right",width:180}],L=m([{id:1,taskName:"测试任务1",channelName:"抖音",memberNickname:"测试会员1",groupName:"群组1",reward:100,auditStatus:N.PENDING}]),C=F({current:1,pageSize:10,total:0}),M={selectedRowKeys:v,onChange:l=>{v.value=l},getCheckboxProps:l=>({disabled:l.auditStatus!==N.PENDING})},E=l=>me(_e,l,K.value),Q=l=>fe[l],O=()=>{C.current=1,f()},W=()=>{s.taskName="",s.channelId=void 0,s.auditStatus=void 0,s.groupId=void 0,O()},X=l=>{Object.assign(C,l),f()},Y=l=>{z.push(`/task-audit/detail/${l.id}`)},Z=async l=>{try{p.success("审核通过成功"),f()}catch{p.error("审核通过失败")}},ee=async()=>{if(!v.value.length){p.warning("请选择要通过的任务");return}try{p.success("批量审核通过成功"),v.value=[],f()}catch{p.error("批量审核通过失败")}},te=l=>{_.value=l,w.value="",S.value=!0},ae=async()=>{if(!w.value){p.error("请输入拒绝原因");return}try{T.value=!0,p.success("审核拒绝成功"),S.value=!1,f()}catch{p.error("审核拒绝失败")}finally{T.value=!1}},ne=()=>{if(!v.value.length){p.warning("请选择要拒绝的任务");return}},f=async()=>{I.value=!0;try{C.total=L.value.length}finally{I.value=!1}};return f(),(l,n)=>{const le=o("a-input"),k=o("a-form-item"),j=o("a-select-option"),R=o("a-select"),x=o("a-button"),A=o("a-space"),oe=o("a-form"),se=o("a-tag"),P=o("a-popconfirm"),ue=o("a-table"),g=o("a-descriptions-item"),ie=o("a-descriptions"),G=o("a-modal"),de=o("a-textarea");return d(),y("div",ve,[c("div",ke,[c("div",ge,[c("div",ye,[a(oe,{layout:"inline",model:s},{default:t(()=>[a(k,{label:"任务名称"},{default:t(()=>[a(le,{value:s.taskName,"onUpdate:value":n[0]||(n[0]=e=>s.taskName=e),placeholder:"请输入任务名称","allow-clear":""},null,8,["value"])]),_:1}),a(k,{label:"平台渠道"},{default:t(()=>[a(R,{value:s.channelId,"onUpdate:value":n[1]||(n[1]=e=>s.channelId=e),placeholder:"请选择平台渠道",style:{width:"120px"},"allow-clear":""},{default:t(()=>[(d(),y(D,null,U(q,e=>a(j,{key:e.id,value:e.id},{default:t(()=>[u(i(e.name),1)]),_:2},1032,["value"])),64))]),_:1},8,["value"])]),_:1}),a(k,{label:"审核状态"},{default:t(()=>[a(R,{value:s.auditStatus,"onUpdate:value":n[2]||(n[2]=e=>s.auditStatus=e),placeholder:"请选择审核状态",style:{width:"120px"},"allow-clear":""},{default:t(()=>[(d(!0),y(D,null,U(Object.values(V(N)),e=>(d(),b(j,{key:e,value:e},{default:t(()=>[u(i(E(e)),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1}),a(k,{label:"所属群组"},{default:t(()=>[a(R,{value:s.groupId,"onUpdate:value":n[3]||(n[3]=e=>s.groupId=e),placeholder:"请选择群组",style:{width:"120px"},"allow-clear":""},{default:t(()=>[(d(),y(D,null,U(H,e=>a(j,{key:e.id,value:e.id},{default:t(()=>[u(i(e.name),1)]),_:2},1032,["value"])),64))]),_:1},8,["value"])]),_:1}),a(k,null,{default:t(()=>[a(A,null,{default:t(()=>[a(x,{type:"primary",onClick:O},{default:t(()=>n[7]||(n[7]=[u("查询")])),_:1}),a(x,{onClick:W},{default:t(()=>n[8]||(n[8]=[u("重置")])),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),c("div",be,[a(A,null,{default:t(()=>[a(x,{type:"primary",onClick:ee},{default:t(()=>n[9]||(n[9]=[u("批量通过")])),_:1}),a(x,{danger:"",onClick:ne},{default:t(()=>n[10]||(n[10]=[u("批量拒绝")])),_:1})]),_:1})])]),a(ue,{columns:J,"data-source":L.value,loading:I.value,pagination:C,"row-selection":M,onChange:X},{bodyCell:t(({column:e,record:r})=>[e.key==="auditStatus"?(d(),b(se,{key:0,color:Q(r.auditStatus)},{default:t(()=>[u(i(E(r.auditStatus)),1)]),_:2},1032,["color"])):h("",!0),e.key==="member"?(d(),y("div",he,[c("div",null,i(r.memberNickname),1),c("div",Ne,i(r.groupName),1)])):h("",!0),e.key==="action"?(d(),b(A,{key:2},{default:t(()=>[c("a",{onClick:$=>Y(r)},"查看",8,Se),r.auditStatus===V(N).PENDING?(d(),b(P,{key:0,title:"确定要通过该任务吗？",onConfirm:$=>Z(r)},{default:t(()=>n[11]||(n[11]=[c("a",null,"通过",-1)])),_:2},1032,["onConfirm"])):h("",!0),r.auditStatus===V(N).PENDING?(d(),b(P,{key:1,title:"确定要拒绝该任务吗？",onConfirm:$=>te(r)},{default:t(()=>n[12]||(n[12]=[c("a",{class:"danger"},"拒绝",-1)])),_:2},1032,["onConfirm"])):h("",!0)]),_:2},1024)):h("",!0)]),_:1},8,["data-source","loading","pagination"])]),a(G,{visible:B.value,"onUpdate:visible":n[4]||(n[4]=e=>B.value=e),title:"任务详情",footer:null},{default:t(()=>[a(ie,{column:1},{default:t(()=>[a(g,{label:"任务名称"},{default:t(()=>{var e;return[u(i((e=_.value)==null?void 0:e.taskName),1)]}),_:1}),a(g,{label:"任务类型"},{default:t(()=>{var e;return[u(i((e=_.value)==null?void 0:e.taskType),1)]}),_:1}),a(g,{label:"任务描述"},{default:t(()=>{var e;return[u(i((e=_.value)==null?void 0:e.description),1)]}),_:1}),a(g,{label:"任务奖励"},{default:t(()=>{var e;return[u(i((e=_.value)==null?void 0:e.reward),1)]}),_:1}),a(g,{label:"创建时间"},{default:t(()=>{var e;return[u(i((e=_.value)==null?void 0:e.createTime),1)]}),_:1})]),_:1})]),_:1},8,["visible"]),a(G,{visible:S.value,"onUpdate:visible":n[6]||(n[6]=e=>S.value=e),title:"拒绝原因",onOk:ae,confirmLoading:T.value},{default:t(()=>[a(de,{value:w.value,"onUpdate:value":n[5]||(n[5]=e=>w.value=e),placeholder:"请输入拒绝原因",rows:4},null,8,["value"])]),_:1},8,["visible","confirmLoading"])])}}},Te=re(we,[["__scopeId","data-v-547d6504"]]);export{Te as default};
