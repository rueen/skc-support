import{_ as V,u as I,a as M,b as P,c as j,r as C,d as S,e as T,o as A,f as $,g as i,h as a,t as c,w as s,i as t,j as G,k as v,l as b,F as H,m as J,n as K,s as O}from"./index-C0n6QpAT.js";const Q={class:"login-container"},W={class:"login-box"},X={class:"login-title"},Y={class:"language-switch"},Z={__name:"index",setup(ee){const d=G(),w=I(),k=M(),f=P(),{t:R,locale:L}=j(),q=C(),h=C(!1),y=S(()=>f.languageColumns),z=S(()=>{var e;return(e=y.value.find(o=>o.value===L.value))==null?void 0:e.value}),B=e=>{const o=e.target.value;O(o)},l=T({username:"",password:"",remember:!0}),D={username:[{required:!0,message:R("login.usernameRequired")}],password:[{required:!0,message:R("login.passwordRequired")}]},E=async e=>{try{h.value=!0;const o={username:e.username,password:e.password};await w.login(o),k.resetEnum(),await k.fetchEnum();const u=d.getRoutes().find(n=>n.path==="/");if(u&&u.children){const n=u.children.filter(m=>{var _,g;const p=(_=m.meta)==null?void 0:_.permissions;return!((g=m.meta)!=null&&g.hidden)&&p&&w.hasPermissions(p)});n.length>0?d.push(n[0].path):d.push("/")}else d.push("/")}catch(o){console.error(o)}finally{h.value=!1}};return A(async()=>{f.languageColumns.length===0&&await f.fetchDefaultRegion()}),(e,o)=>{const x=t("user-outlined"),u=t("a-input"),n=t("a-form-item"),m=t("lock-outlined"),p=t("a-input-password"),_=t("a-checkbox"),g=t("a-button"),U=t("a-form"),F=t("a-radio-button"),N=t("a-radio-group");return v(),$("div",Q,[i("div",W,[i("div",X,[i("h1",null,c(e.$t("app.title")),1),i("p",null,c(e.$t("login.title")),1)]),a(U,{ref_key:"formRef",ref:q,model:l,rules:D,onFinish:E},{default:s(()=>[a(n,{name:"username"},{default:s(()=>[a(u,{value:l.username,"onUpdate:value":o[0]||(o[0]=r=>l.username=r),size:"large",placeholder:e.$t("login.username")},{prefix:s(()=>[a(x)]),_:1},8,["value","placeholder"])]),_:1}),a(n,{name:"password"},{default:s(()=>[a(p,{value:l.password,"onUpdate:value":o[1]||(o[1]=r=>l.password=r),size:"large",placeholder:e.$t("login.password")},{prefix:s(()=>[a(m)]),_:1},8,["value","placeholder"])]),_:1}),a(n,null,{default:s(()=>[a(_,{checked:l.remember,"onUpdate:checked":o[2]||(o[2]=r=>l.remember=r)},{default:s(()=>[b(c(e.$t("login.rememberMe")),1)]),_:1},8,["checked"])]),_:1}),a(n,null,{default:s(()=>[a(g,{type:"primary","html-type":"submit",size:"large",loading:h.value,block:""},{default:s(()=>[b(c(e.$t("login.login")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"]),i("div",Y,[a(N,{value:z.value,"button-style":"solid",size:"small",onChange:B},{default:s(()=>[(v(!0),$(H,null,J(y.value,r=>(v(),K(F,{value:r.value},{default:s(()=>[b(c(r.text),1)]),_:2},1032,["value"]))),256))]),_:1},8,["value"])])])])}}},ae=V(Z,[["__scopeId","data-v-240bff11"]]);export{ae as default};
