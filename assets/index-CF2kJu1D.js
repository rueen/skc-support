import{a as H,c as J,r as I,e as v,d as O,p as K,f as x,g as i,h as t,w as a,i as n,q as Q,v as k,j as W,o as _,F as X,l as Y,n as E,k as u,t as c,x as Z,y as ee}from"./index-BNU4geFj.js";const te={class:"ad content-container"},ae={class:"table-container"},oe={class:"table-header"},ne={class:"left"},se={class:"right"},le=["onClick"],ie={__name:"index",setup(de){const b=W(),f=H(),{t:l}=J(),h=I(!1),d=v({title:"",status:void 0}),F=O(()=>f.loaded?f.getEnumOptions("AdStatus"):[]),j=O(()=>[{title:l("ad.title"),dataIndex:"title",key:"title"},{title:l("ad.location"),dataIndex:"location",key:"location"},{title:l("ad.status"),dataIndex:"status",key:"status",customRender:({text:e})=>f.getEnumText("AdStatus",e)},{title:l("common.startTime"),dataIndex:"startTime",key:"startTime",sorter:!0},{title:l("common.endTime"),dataIndex:"endTime",key:"endTime",sorter:!0},{title:l("common.updateTime"),dataIndex:"updateTime",key:"updateTime",sorter:!0},{title:l("common.operation"),key:"action",width:200}]),C=I([]),r=v({current:1,pageSize:10,total:0}),T=v({sorterField:void 0,sorterOrder:void 0}),$=()=>{r.current=1,m()},B=()=>{Object.assign(d,{title:"",status:void 0}),$()},D=(e,o,p)=>{Object.assign(r,e),Object.assign(T,{sorterField:p.field,sorterOrder:p.order}),m()},N=async e=>{try{const o=await ee("ad.delete",{id:e.id},{urlParams:{id:e.id}});o.code===0?(k.success(o.message),m()):k.error(o.message)}catch(o){console.error(o)}},V=()=>{b.push("/ad/create")},z=e=>{b.push(`/ad/edit/${e.id}`)},m=async()=>{h.value=!0;try{const e=await Q("ad.list",{page:r.current,pageSize:r.pageSize,...T,...d});e.code===0?(C.value=e.data.list,r.total=e.data.total):k.error(e.message)}finally{h.value=!1}};return K(()=>{m()}),(e,o)=>{const p=n("a-input"),g=n("a-form-item"),A=n("a-select-option"),P=n("a-select"),y=n("a-button"),S=n("a-space"),R=n("a-form"),U=n("plus-outlined"),q=n("a-typography-text"),L=n("a-popconfirm"),M=n("a-table");return _(),x("div",te,[i("div",ae,[i("div",oe,[i("div",ne,[t(R,{layout:"inline",model:d},{default:a(()=>[t(g,{label:e.$t("ad.title")},{default:a(()=>[t(p,{value:d.title,"onUpdate:value":o[0]||(o[0]=s=>d.title=s),placeholder:e.$t("common.inputPlaceholder"),"allow-clear":""},null,8,["value","placeholder"])]),_:1},8,["label"]),t(g,{label:e.$t("ad.status")},{default:a(()=>[t(P,{value:d.status,"onUpdate:value":o[1]||(o[1]=s=>d.status=s),placeholder:e.$t("common.selectPlaceholder"),allowClear:""},{default:a(()=>[(_(!0),x(X,null,Y(F.value,s=>(_(),E(A,{key:s.value,value:s.value},{default:a(()=>[u(c(s.text),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"])]),_:1},8,["label"]),t(g,null,{default:a(()=>[t(S,null,{default:a(()=>[t(y,{type:"primary",onClick:$},{default:a(()=>[u(c(e.$t("common.search")),1)]),_:1}),t(y,{onClick:B},{default:a(()=>[u(c(e.$t("common.reset")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),i("div",se,[t(y,{type:"primary",onClick:V},{default:a(()=>[t(U),u(" "+c(e.$t("ad.add")),1)]),_:1})])]),t(M,{columns:j.value,"data-source":C.value,loading:h.value,pagination:r,showSorterTooltip:!1,onChange:D},{bodyCell:a(({column:s,record:w})=>[s.key==="action"?(_(),E(S,{key:0},{default:a(()=>[i("a",{onClick:G=>z(w)},c(e.$t("common.edit")),9,le),t(L,{title:e.$t("common.deleteConfirm"),onConfirm:G=>N(w)},{default:a(()=>[i("a",null,[t(q,{type:"danger"},{default:a(()=>[u(c(e.$t("common.delete")),1)]),_:1})])]),_:2},1032,["title","onConfirm"])]),_:2},1024)):Z("",!0)]),_:1},8,["columns","data-source","loading","pagination"])])])}}};export{ie as default};
