import{_ as re,i as ce,r as m,a as F,b as y,d as c,c as t,w as a,e as o,f as pe,o as i,F as D,l as U,h as u,t as d,g as V,m as h,n as b,k as p}from"./index-CUxxoPlX.js";import{e as N,g as me,f as _e,h as fe}from"./enums-BRJzZuqT.js";const ve={class:"task-audit content-container"},ke={class:"table-container"},ge={class:"table-header"},ye={class:"left"},he={class:"right"},be={key:1},Ne={class:"group-name"},Se=["onClick"],we={__name:"list",setup(Ce){const z=pe(),{locale:K}=ce(),I=m(!1),B=m(!1),S=m(!1),T=m(!1),w=m(""),_=m(null),v=m([]),s=F({taskName:"",channelId:void 0,auditStatus:void 0,groupId:void 0}),q=[{id:1,name:"抖音"},{id:2,name:"快手"}],H=[{id:1,name:"群组1"},{id:2,name:"群组2"},{id:3,name:"群组3"}],J=[{title:"任务名称",dataIndex:"taskName",key:"taskName"},{title:"平台渠道",dataIndex:"channelName",key:"channelName"},{title:"任务奖励",dataIndex:"reward",key:"reward"},{title:"会员信息",key:"member"},{title:"审核状态",dataIndex:"auditStatus",key:"auditStatus"},{title:"操作",key:"action",fixed:"right",width:180}],L=m([{id:1,taskName:"测试任务1",channelName:"抖音",memberNickname:"测试会员1",groupName:"群组1",reward:100,auditStatus:N.PENDING}]),C=F({current:1,pageSize:10,total:0}),M={selectedRowKeys:v,onChange:l=>{v.value=l},getCheckboxProps:l=>({disabled:l.auditStatus!==N.PENDING})},E=l=>me(_e,l,K.value),Q=l=>fe[l],O=()=>{C.current=1,f()},W=()=>{s.taskName="",s.channelId=void 0,s.auditStatus=void 0,s.groupId=void 0,O()},X=l=>{Object.assign(C,l),f()},Y=l=>{z.push(`/task-audit/detail/${l.id}`)},Z=async l=>{try{p.success("审核通过成功"),f()}catch{p.error("审核通过失败")}},ee=async()=>{if(!v.value.length){p.warning("请选择要通过的任务");return}try{p.success("批量审核通过成功"),v.value=[],f()}catch{p.error("批量审核通过失败")}},ae=l=>{_.value=l,w.value="",S.value=!0},te=async()=>{if(!w.value){p.error("请输入拒绝原因");return}try{T.value=!0,p.success("审核拒绝成功"),S.value=!1,f()}catch{p.error("审核拒绝失败")}finally{T.value=!1}},ne=()=>{if(!v.value.length){p.warning("请选择要拒绝的任务");return}},f=async()=>{I.value=!0;try{C.total=L.value.length}finally{I.value=!1}};return f(),(l,n)=>{const le=o("a-input"),k=o("a-form-item"),j=o("a-select-option"),R=o("a-select"),x=o("a-button"),A=o("a-space"),oe=o("a-form"),se=o("a-tag"),P=o("a-popconfirm"),ue=o("a-table"),g=o("a-descriptions-item"),de=o("a-descriptions"),G=o("a-modal"),ie=o("a-textarea");return i(),y("div",ve,[c("div",ke,[c("div",ge,[c("div",ye,[t(oe,{layout:"inline",model:s},{default:a(()=>[t(k,{label:"任务名称"},{default:a(()=>[t(le,{value:s.taskName,"onUpdate:value":n[0]||(n[0]=e=>s.taskName=e),placeholder:"请输入任务名称","allow-clear":""},null,8,["value"])]),_:1}),t(k,{label:"平台渠道"},{default:a(()=>[t(R,{value:s.channelId,"onUpdate:value":n[1]||(n[1]=e=>s.channelId=e),placeholder:"请选择平台渠道",style:{width:"120px"},"allow-clear":""},{default:a(()=>[(i(),y(D,null,U(q,e=>t(j,{key:e.id,value:e.id},{default:a(()=>[u(d(e.name),1)]),_:2},1032,["value"])),64))]),_:1},8,["value"])]),_:1}),t(k,{label:"审核状态"},{default:a(()=>[t(R,{value:s.auditStatus,"onUpdate:value":n[2]||(n[2]=e=>s.auditStatus=e),placeholder:"请选择审核状态",style:{width:"120px"},"allow-clear":""},{default:a(()=>[(i(!0),y(D,null,U(Object.values(V(N)),e=>(i(),h(j,{key:e,value:e},{default:a(()=>[u(d(E(e)),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1}),t(k,{label:"所属群组"},{default:a(()=>[t(R,{value:s.groupId,"onUpdate:value":n[3]||(n[3]=e=>s.groupId=e),placeholder:"请选择群组",style:{width:"120px"},"allow-clear":""},{default:a(()=>[(i(),y(D,null,U(H,e=>t(j,{key:e.id,value:e.id},{default:a(()=>[u(d(e.name),1)]),_:2},1032,["value"])),64))]),_:1},8,["value"])]),_:1}),t(k,null,{default:a(()=>[t(A,null,{default:a(()=>[t(x,{type:"primary",onClick:O},{default:a(()=>n[7]||(n[7]=[u("查询")])),_:1}),t(x,{onClick:W},{default:a(()=>n[8]||(n[8]=[u("重置")])),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),c("div",he,[t(A,null,{default:a(()=>[t(x,{type:"primary",onClick:ee},{default:a(()=>n[9]||(n[9]=[u("批量通过")])),_:1}),t(x,{danger:"",onClick:ne},{default:a(()=>n[10]||(n[10]=[u("批量拒绝")])),_:1})]),_:1})])]),t(ue,{columns:J,"data-source":L.value,loading:I.value,pagination:C,"row-selection":M,onChange:X},{bodyCell:a(({column:e,record:r})=>[e.key==="auditStatus"?(i(),h(se,{key:0,color:Q(r.auditStatus)},{default:a(()=>[u(d(E(r.auditStatus)),1)]),_:2},1032,["color"])):b("",!0),e.key==="member"?(i(),y("div",be,[c("div",null,d(r.memberNickname),1),c("div",Ne,d(r.groupName),1)])):b("",!0),e.key==="action"?(i(),h(A,{key:2},{default:a(()=>[c("a",{onClick:$=>Y(r)},"查看",8,Se),r.auditStatus===V(N).PENDING?(i(),h(P,{key:0,title:"确定要通过该任务吗？",onConfirm:$=>Z(r)},{default:a(()=>n[11]||(n[11]=[c("a",null,"通过",-1)])),_:2},1032,["onConfirm"])):b("",!0),r.auditStatus===V(N).PENDING?(i(),h(P,{key:1,title:"确定要拒绝该任务吗？",onConfirm:$=>ae(r)},{default:a(()=>n[12]||(n[12]=[c("a",{class:"danger"},"拒绝",-1)])),_:2},1032,["onConfirm"])):b("",!0)]),_:2},1024)):b("",!0)]),_:1},8,["data-source","loading","pagination"])]),t(G,{open:B.value,"onUpdate:open":n[4]||(n[4]=e=>B.value=e),title:"任务详情",footer:null},{default:a(()=>[t(de,{column:1},{default:a(()=>[t(g,{label:"任务名称"},{default:a(()=>{var e;return[u(d((e=_.value)==null?void 0:e.taskName),1)]}),_:1}),t(g,{label:"任务类型"},{default:a(()=>{var e;return[u(d((e=_.value)==null?void 0:e.taskType),1)]}),_:1}),t(g,{label:"任务描述"},{default:a(()=>{var e;return[u(d((e=_.value)==null?void 0:e.description),1)]}),_:1}),t(g,{label:"任务奖励"},{default:a(()=>{var e;return[u(d((e=_.value)==null?void 0:e.reward),1)]}),_:1}),t(g,{label:"创建时间"},{default:a(()=>{var e;return[u(d((e=_.value)==null?void 0:e.createTime),1)]}),_:1})]),_:1})]),_:1},8,["open"]),t(G,{open:S.value,"onUpdate:open":n[6]||(n[6]=e=>S.value=e),title:"拒绝原因",onOk:te,confirmLoading:T.value},{default:a(()=>[t(ie,{value:w.value,"onUpdate:value":n[5]||(n[5]=e=>w.value=e),placeholder:"请输入拒绝原因",rows:4},null,8,["value"])]),_:1},8,["open","confirmLoading"])])}}},Te=re(we,[["__scopeId","data-v-34ce9a57"]]);export{Te as default};
