import{a as G,b as H,r as w,c as v,j as O,k as J,d as I,e as i,f as t,w as a,g as n,l as K,m as y,o as _,F as Q,n as W,p as F,i as u,t as c,s as X,v as Y}from"./index-ZPK4NXiE.js";const Z={class:"ad content-container"},ee={class:"table-container"},te={class:"table-header"},ae={class:"left"},oe={class:"right"},ne=["onClick"],de={__name:"index",setup(le){const k=G(),{t:d}=H(),f=w(!1),s=v({title:"",status:void 0}),j=O(()=>k.loaded?k.getEnumOptions("AdStatus"):[]),x=O(()=>[{title:d("ad.title"),dataIndex:"title",key:"title"},{title:d("ad.location"),dataIndex:"location",key:"location"},{title:d("common.startTime"),dataIndex:"startTime",key:"startTime",sorter:!0},{title:d("common.endTime"),dataIndex:"endTime",key:"endTime",sorter:!0},{title:d("common.updateTime"),dataIndex:"updateTime",key:"updateTime",sorter:!0},{title:d("common.operation"),key:"action",width:200}]),b=w([]),r=v({current:1,pageSize:10,total:0}),C=v({sorterField:void 0,sorterOrder:void 0}),T=()=>{r.current=1,m()},B=()=>{Object.assign(s,{title:"",status:void 0}),T()},D=(e,o,p)=>{Object.assign(r,e),Object.assign(C,{sorterField:p.field,sorterOrder:p.order}),m()},E=async e=>{try{const o=await Y("ad.delete",{id:e.id},{urlParams:{id:e.id}});o.code===0?(y.success(o.message),m()):y.error(o.message)}catch(o){console.error(o)}},N=()=>{},V=e=>{},m=async()=>{f.value=!0;try{const e=await K("ad.list",{page:r.current,pageSize:r.pageSize,...C,...s});e.code===0?(b.value=e.data.list,r.total=e.data.total):y.error(e.message)}finally{f.value=!1}};return J(()=>{m()}),(e,o)=>{const p=n("a-input"),h=n("a-form-item"),z=n("a-select-option"),P=n("a-select"),g=n("a-button"),$=n("a-space"),A=n("a-form"),U=n("plus-outlined"),L=n("a-typography-text"),M=n("a-popconfirm"),R=n("a-table");return _(),I("div",Z,[i("div",ee,[i("div",te,[i("div",ae,[t(A,{layout:"inline",model:s},{default:a(()=>[t(h,{label:e.$t("ad.title")},{default:a(()=>[t(p,{value:s.title,"onUpdate:value":o[0]||(o[0]=l=>s.title=l),placeholder:e.$t("common.inputPlaceholder"),"allow-clear":""},null,8,["value","placeholder"])]),_:1},8,["label"]),t(h,{label:e.$t("ad.status")},{default:a(()=>[t(P,{value:s.status,"onUpdate:value":o[1]||(o[1]=l=>s.status=l),placeholder:e.$t("common.selectPlaceholder"),allowClear:"",style:{width:"120px"}},{default:a(()=>[(_(!0),I(Q,null,W(j.value,l=>(_(),F(z,{key:l.value,value:l.value},{default:a(()=>[u(c(l.text),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"])]),_:1},8,["label"]),t(h,null,{default:a(()=>[t($,null,{default:a(()=>[t(g,{type:"primary",onClick:T},{default:a(()=>[u(c(e.$t("common.search")),1)]),_:1}),t(g,{onClick:B},{default:a(()=>[u(c(e.$t("common.reset")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),i("div",oe,[t(g,{type:"primary",onClick:N},{default:a(()=>[t(U),u(" "+c(e.$t("ad.add")),1)]),_:1})])]),t(R,{columns:x.value,"data-source":b.value,loading:f.value,pagination:r,showSorterTooltip:!1,onChange:D},{bodyCell:a(({column:l,record:S})=>[l.key==="action"?(_(),F($,{key:0},{default:a(()=>[i("a",{onClick:q=>V(S)},c(e.$t("common.edit")),9,ne),t(M,{title:e.$t("common.deleteConfirm"),onConfirm:q=>E(S)},{default:a(()=>[i("a",null,[t(L,{type:"danger"},{default:a(()=>[u(c(e.$t("common.delete")),1)]),_:1})])]),_:2},1032,["title","onConfirm"])]),_:2},1024)):X("",!0)]),_:1},8,["columns","data-source","loading","pagination"])])])}}};export{de as default};
