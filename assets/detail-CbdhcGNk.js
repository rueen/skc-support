import{_ as C,r as s,n as R,p as B,a as N,q as V,b as $,c as a,d as E,w as n,e as r,m,f as L,o as M,h as b}from"./index-BKWLtMxF.js";import{P}from"./index-nosevVe7.js";const S={class:"member-form content-container"},j={class:"form-container"},H={__name:"detail",setup(T){const k=B(),c=L(),i=s(),f=R(()=>!!k.params.id),o=N({name:"",phone:"",groupId:void 0,isGroupOwner:!1,remark:""}),w={name:[{required:!0,message:"请输入会员名称"}],phone:[{required:!0,message:"请输入手机号"},{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号"}],groupId:[{required:!0,message:"请选择所属群"}]},u=s(!1),_=s([]),y=async()=>{u.value=!0;try{_.value=[{label:"测试群组1",value:"1"},{label:"测试群组2",value:"2"}]}finally{u.value=!1}},h=async()=>{if(f.value)try{Object.assign(o,{name:"张三",phone:"13800138000",groupId:"1",isGroupOwner:!0,remark:"测试备注"})}catch{m.error("加载会员信息失败"),c.back()}},p=s(!1),I=()=>{i.value.validate().then(async()=>{try{p.value=!0,m.success("提交成功"),c.back()}catch{m.error("提交失败")}finally{p.value=!1}})};return V(()=>{y(),h()}),(d,e)=>{const v=r("a-input"),l=r("a-form-item"),O=r("a-select"),x=r("a-switch"),G=r("a-textarea"),g=r("a-button"),U=r("a-space"),q=r("a-form");return M(),$("div",S,[a(P,{title:f.value?"编辑会员":"新增会员",back:!0,class:"page-header"},null,8,["title"]),E("div",j,[a(q,{ref_key:"formRef",ref:i,model:o,rules:w,"label-col":{span:4},"wrapper-col":{span:16}},{default:n(()=>[a(l,{label:"会员名称",name:"name"},{default:n(()=>[a(v,{value:o.name,"onUpdate:value":e[0]||(e[0]=t=>o.name=t),placeholder:"请输入会员名称"},null,8,["value"])]),_:1}),a(l,{label:"手机号",name:"phone"},{default:n(()=>[a(v,{value:o.phone,"onUpdate:value":e[1]||(e[1]=t=>o.phone=t),placeholder:"请输入手机号"},null,8,["value"])]),_:1}),a(l,{label:"所属群",name:"groupId"},{default:n(()=>[a(O,{value:o.groupId,"onUpdate:value":e[2]||(e[2]=t=>o.groupId=t),placeholder:"请选择所属群",loading:u.value,options:_.value},null,8,["value","loading","options"])]),_:1}),a(l,{label:"群主标识",name:"isGroupOwner"},{default:n(()=>[a(x,{checked:o.isGroupOwner,"onUpdate:checked":e[3]||(e[3]=t=>o.isGroupOwner=t)},null,8,["checked"])]),_:1}),a(l,{label:"备注",name:"remark"},{default:n(()=>[a(G,{value:o.remark,"onUpdate:value":e[4]||(e[4]=t=>o.remark=t),rows:4,placeholder:"请输入备注信息"},null,8,["value"])]),_:1}),a(l,{"wrapper-col":{offset:4}},{default:n(()=>[a(U,null,{default:n(()=>[a(g,{type:"primary",loading:p.value,onClick:I},{default:n(()=>e[6]||(e[6]=[b(" 提交 ")])),_:1},8,["loading"]),a(g,{onClick:e[5]||(e[5]=t=>d.$router.back())},{default:n(()=>e[7]||(e[7]=[b("取消")])),_:1})]),_:1})]),_:1})]),_:1},8,["model"])])])}}},D=C(H,[["__scopeId","data-v-87def66e"]]);export{D as default};
