import{r as i,b as R,c as V,k as A,d as I,f as l,e as j,w as o,g as r,l as z,x as E,m as p,h as F,o as m,p as v,s as b,i as C,t as _,z as O}from"./index-dKfzYf08.js";import{P as S}from"./PageHeader-Dcs4Wlyv.js";const T={class:"content-container"},q={class:"form-container"},G={__name:"detail",setup(H){const y=E(),U=F(),g=i(),{t:$}=R(),c=i({}),d=i([]),t=V({homeUrl:"",uid:"",account:"",fansCount:"",friendsCount:"",postsCount:""}),w={memberAccount:[{required:!0,message:$("member.detail.memberAccountPlaceholder")}]},h=async()=>{const e=await z("account.detail",{},{urlParams:{id:y.params.id}});e.code===0?(Object.assign(t,e.data),c.value=e.data,d.value=e.data.channelCustomFields):p.error(e.message)},f=i(!1),D=()=>{g.value.validate().then(async()=>{try{const e={};Object.keys(t).forEach(a=>{t[a]!=null&&(e[a]=t[a])}),f.value=!0,await O("account.edit",e,{urlParams:{id:c.value.id}}),p.success("success"),U.back()}catch(e){console.log(e),p.error("submit failed")}finally{f.value=!1}})};return A(async()=>{h()}),(e,a)=>{const N=r("a-avatar"),u=r("a-form-item"),s=r("a-input"),k=r("a-button"),P=r("a-space"),B=r("a-form");return m(),I("div",T,[l(S,{title:e.$t("account.detail.editTitle"),back:!0},null,8,["title"]),j("div",q,[l(B,{ref_key:"formRef",ref:g,model:t,rules:w,"label-col":{span:6},"wrapper-col":{span:16}},{default:o(()=>[l(u,{label:e.$t("account.detail.platform"),name:"platform"},{default:o(()=>[l(N,{src:c.value.channelIcon,size:"small"},null,8,["src"]),C(" "+_(c.value.channelName),1)]),_:1},8,["label"]),l(u,{label:e.$t("account.detail.account"),name:"account"},{default:o(()=>[l(s,{value:t.account,"onUpdate:value":a[0]||(a[0]=n=>t.account=n)},null,8,["value"])]),_:1},8,["label"]),l(u,{label:e.$t("account.detail.homepage"),name:"homeUrl"},{default:o(()=>[l(s,{value:t.homeUrl,"onUpdate:value":a[1]||(a[1]=n=>t.homeUrl=n)},null,8,["value"])]),_:1},8,["label"]),l(u,{label:"UID",name:"uid"},{default:o(()=>[l(s,{value:t.uid,"onUpdate:value":a[2]||(a[2]=n=>t.uid=n)},null,8,["value"])]),_:1}),d.value.includes("fansCount")?(m(),v(u,{key:0,label:e.$t("account.detail.fansCount"),name:"fansCount"},{default:o(()=>[l(s,{value:t.fansCount,"onUpdate:value":a[3]||(a[3]=n=>t.fansCount=n)},null,8,["value"])]),_:1},8,["label"])):b("",!0),d.value.includes("friendsCount")?(m(),v(u,{key:1,label:e.$t("account.detail.friendsCount"),name:"friendsCount"},{default:o(()=>[l(s,{value:t.friendsCount,"onUpdate:value":a[4]||(a[4]=n=>t.friendsCount=n)},null,8,["value"])]),_:1},8,["label"])):b("",!0),d.value.includes("postsCount")?(m(),v(u,{key:2,label:e.$t("account.detail.postsCount"),name:"postsCount"},{default:o(()=>[l(s,{value:t.postsCount,"onUpdate:value":a[5]||(a[5]=n=>t.postsCount=n)},null,8,["value"])]),_:1},8,["label"])):b("",!0),l(u,{"wrapper-col":{offset:4}},{default:o(()=>[l(P,null,{default:o(()=>[l(k,{type:"primary",loading:f.value,onClick:D},{default:o(()=>[C(_(e.$t("common.submit")),1)]),_:1},8,["loading"]),l(k,{onClick:a[6]||(a[6]=n=>e.$router.back())},{default:o(()=>[C(_(e.$t("common.cancel")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])])])}}};export{G as default};
