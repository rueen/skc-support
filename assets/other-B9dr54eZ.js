import{B as R,S as b,n as q,o as G}from"./enums-Vx4wKXVy.js";import{g as H}from"./request-oNTjVa74.js";import{_ as J,k as K,r as I,a as w,l as P,b as d,d as y,c as n,w as a,e as s,i as Q,o as c,F as g,m as D,g as L,n as v,h as i,t as u,p as j}from"./index-DxDHjWNo.js";const W={class:"other-bill content-container"},X={class:"table-container"},Y={class:"table-header"},Z={class:"left"},ee={__name:"other",setup(te){const{t:ae,locale:k}=K(),p=I(!1),o=w({memberNickname:"",billType:void 0,settlementStatus:void 0}),E=[{title:"会员名称",dataIndex:"memberNickname",key:"memberNickname"},{title:"账单类型",dataIndex:"billType",key:"billType"},{title:"关联任务",dataIndex:"taskName",key:"taskName"},{title:"金额",dataIndex:"amount",key:"amount",align:"right"},{title:"创建时间",dataIndex:"createTime",key:"createTime"},{title:"结算状态",dataIndex:"settlementStatus",key:"settlementStatus"}],S=I([]),r=w({current:1,pageSize:10,total:0}),h=e=>{var l;return((l=q[e])==null?void 0:l[k.value])||e},T=e=>{var l;return((l=G[e])==null?void 0:l[k.value])||e},F=e=>({[b.SETTLED]:"success",[b.FAILED]:"error"})[e],x=()=>{r.current=1,_()},O=()=>{Object.assign(o,{memberNickname:"",billType:void 0,settlementStatus:void 0}),x()},V=e=>{Object.assign(r,e),_()},_=async()=>{p.value=!0;try{const e=await H("settlement.otherBills",{page:r.current,pageSize:r.pageSize,...o});e.code===0?(S.value=e.data.list,r.total=e.data.total):Q.error(e.message)}finally{p.value=!1}};return P(()=>{_()}),(e,l)=>{const z=s("a-input"),m=s("a-form-item"),N=s("a-select-option"),B=s("a-select"),C=s("a-button"),U=s("a-space"),$=s("a-form"),A=s("a-tag"),M=s("a-table");return c(),d("div",W,[y("div",X,[y("div",Y,[y("div",Z,[n($,{layout:"inline",model:o},{default:a(()=>[n(m,{label:"会员名称"},{default:a(()=>[n(z,{value:o.memberNickname,"onUpdate:value":l[0]||(l[0]=t=>o.memberNickname=t),placeholder:"请输入会员名称","allow-clear":""},null,8,["value"])]),_:1}),n(m,{label:"账单类型"},{default:a(()=>[n(B,{value:o.billType,"onUpdate:value":l[1]||(l[1]=t=>o.billType=t),placeholder:"请选择账单类型",style:{width:"120px"},"allow-clear":""},{default:a(()=>[(c(!0),d(g,null,D(Object.values(L(R)),t=>(c(),v(N,{key:t,value:t},{default:a(()=>[i(u(h(t)),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1}),n(m,{label:"结算状态"},{default:a(()=>[n(B,{value:o.settlementStatus,"onUpdate:value":l[2]||(l[2]=t=>o.settlementStatus=t),placeholder:"请选择结算状态",style:{width:"120px"},"allow-clear":""},{default:a(()=>[(c(!0),d(g,null,D(Object.values(L(b)),t=>(c(),v(N,{key:t,value:t},{default:a(()=>[i(u(T(t)),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1}),n(m,null,{default:a(()=>[n(U,null,{default:a(()=>[n(C,{type:"primary",onClick:x},{default:a(()=>[i(u(e.$t("common.search")),1)]),_:1}),n(C,{onClick:O},{default:a(()=>[i(u(e.$t("common.reset")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])])]),n(M,{columns:E,"data-source":S.value,loading:p.value,pagination:r,onChange:V},{bodyCell:a(({column:t,record:f})=>[t.key==="billType"?(c(),d(g,{key:0},[i(u(h(f.billType)),1)],64)):j("",!0),t.key==="settlementStatus"?(c(),v(A,{key:1,color:F(f.settlementStatus)},{default:a(()=>[i(u(T(f.settlementStatus)),1)]),_:2},1032,["color"])):j("",!0)]),_:1},8,["data-source","loading","pagination"])])])}}},se=J(ee,[["__scopeId","data-v-d892d4ca"]]);export{se as default};
