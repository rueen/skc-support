import{_ as N,u as q,a as I,b as B,r as w,c as L,d as V,e as i,f as o,t as f,w as t,g as n,h as D,o as P,i as d}from"./index-DLDbQKfj.js";const T={class:"login-container"},F={class:"login-box"},M={class:"login-title"},W={class:"language-switch"},j={__name:"index",setup(A){const m=D(),k=q(),y=I(),{t:h}=B(),z=w(),v=w(!1),R=w(localStorage.getItem("language")||"zh-CN"),x=s=>{const e=s.target.value;h.value=e,console.log(e),localStorage.setItem("language",e)},r=L({username:"",password:"",remember:!0}),C={username:[{required:!0,message:h("login.usernameRequired")}],password:[{required:!0,message:h("login.passwordRequired")}]},U=async s=>{try{v.value=!0;const e={username:s.username,password:s.password};await k.login(e),y.resetEnum(),await y.fetchEnum();const u=m.getRoutes().find(a=>a.path==="/");if(u&&u.children){const a=u.children.filter(p=>{var _,g;const c=(_=p.meta)==null?void 0:_.permissions;return!((g=p.meta)!=null&&g.hidden)&&c&&k.hasPermissions(c)});a.length>0?m.push(a[0].path):m.push("/")}else m.push("/")}catch(e){console.error(e)}finally{v.value=!1}};return(s,e)=>{const S=n("user-outlined"),u=n("a-input"),a=n("a-form-item"),p=n("lock-outlined"),c=n("a-input-password"),_=n("a-checkbox"),g=n("a-button"),$=n("a-form"),b=n("a-radio-button"),E=n("a-radio-group");return P(),V("div",T,[i("div",F,[i("div",M,[i("h1",null,f(s.$t("app.title")),1),i("p",null,f(s.$t("login.title")),1)]),o($,{ref_key:"formRef",ref:z,model:r,rules:C,onFinish:U},{default:t(()=>[o(a,{name:"username"},{default:t(()=>[o(u,{value:r.username,"onUpdate:value":e[0]||(e[0]=l=>r.username=l),size:"large",placeholder:s.$t("login.username")},{prefix:t(()=>[o(S)]),_:1},8,["value","placeholder"])]),_:1}),o(a,{name:"password"},{default:t(()=>[o(c,{value:r.password,"onUpdate:value":e[1]||(e[1]=l=>r.password=l),size:"large",placeholder:s.$t("login.password")},{prefix:t(()=>[o(p)]),_:1},8,["value","placeholder"])]),_:1}),o(a,null,{default:t(()=>[o(_,{checked:r.remember,"onUpdate:checked":e[2]||(e[2]=l=>r.remember=l)},{default:t(()=>[d(f(s.$t("login.rememberMe")),1)]),_:1},8,["checked"])]),_:1}),o(a,null,{default:t(()=>[o(g,{type:"primary","html-type":"submit",size:"large",loading:v.value,block:""},{default:t(()=>[d(f(s.$t("login.login")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"]),i("div",W,[o(E,{value:R.value,"onUpdate:value":e[3]||(e[3]=l=>R.value=l),"button-style":"solid",size:"small",onChange:x},{default:t(()=>[o(b,{value:"zh-CN"},{default:t(()=>e[4]||(e[4]=[d("简体中文")])),_:1}),o(b,{value:"zh-TW"},{default:t(()=>e[5]||(e[5]=[d("繁體中文")])),_:1}),o(b,{value:"en-US"},{default:t(()=>e[6]||(e[6]=[d("English")])),_:1})]),_:1},8,["value"])])])])}}},H=N(j,[["__scopeId","data-v-3d71e387"]]);export{H as default};
