import{_ as B,r as i,a as I,b as L,d as m,c as n,w as s,e as l,o as f,m as R,n as V,k as N}from"./index-BwvjrgmS.js";const U={class:"article content-container"},q={class:"table-container"},E=["onClick"],O={class:"editor-wrapper"},z={__name:"index",setup(M){const r=i(!1),c=i(!1),u=i(!1),_=i(),e=I({id:null,title:"",content:""}),v={title:[{required:!0,message:"请输入文章标题"}],content:[{required:!0,message:"请输入文章内容"}]},k=[{title:"文章标题",dataIndex:"title",key:"title"},{title:"更新时间",dataIndex:"updateTime",key:"updateTime"},{title:"操作",key:"action",width:100}],d=i([{id:1,title:"用户协议",content:"这是用户协议的内容...",updateTime:"2024-02-28 10:00:00"},{id:2,title:"隐私政策",content:"这是隐私政策的内容...",updateTime:"2024-02-28 11:00:00"}]),x=t=>{e.id=t.id,e.title=t.title,e.content=t.content,c.value=!0},y=async()=>{try{await _.value.validate(),u.value=!0;const t=d.value.findIndex(a=>a.id===e.id);t!==-1&&(d.value[t]={...d.value[t],title:e.title,content:e.content,updateTime:new Date().toLocaleString()}),N.success("保存成功"),c.value=!1}catch(t){console.error(t)}finally{u.value=!1}};return(async()=>{r.value=!0,r.value=!1})(),(t,a)=>{const b=l("a-space"),g=l("a-table"),w=l("a-input"),p=l("a-form-item"),h=l("a-textarea"),C=l("a-form"),D=l("a-modal");return f(),L("div",U,[m("div",q,[n(g,{columns:k,"data-source":d.value,loading:r.value,pagination:!1},{bodyCell:s(({column:o,record:T})=>[o.key==="action"?(f(),R(b,{key:0},{default:s(()=>[m("a",{onClick:$=>x(T)},"编辑",8,E)]),_:2},1024)):V("",!0)]),_:1},8,["data-source","loading"])]),n(D,{open:c.value,"onUpdate:open":a[2]||(a[2]=o=>c.value=o),title:"编辑文章",width:800,confirmLoading:u.value,onOk:y},{default:s(()=>[n(C,{ref_key:"formRef",ref:_,model:e,rules:v,"label-col":{span:4},"wrapper-col":{span:19}},{default:s(()=>[n(p,{label:"文章标题",name:"title"},{default:s(()=>[n(w,{value:e.title,"onUpdate:value":a[0]||(a[0]=o=>e.title=o),placeholder:"请输入文章标题"},null,8,["value"])]),_:1}),n(p,{label:"文章内容",name:"content"},{default:s(()=>[m("div",O,[n(h,{value:e.content,"onUpdate:value":a[1]||(a[1]=o=>e.content=o),placeholder:"请输入文章内容","auto-size":{minRows:10,maxRows:20}},null,8,["value"])])]),_:1})]),_:1},8,["model"])]),_:1},8,["open","confirmLoading"])])}}},A=B(z,[["__scopeId","data-v-ca8d5ba5"]]);export{A as default};
