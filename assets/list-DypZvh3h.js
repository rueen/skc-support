import{_ as z,r as G,b as E,c as g,j as R,k as U,d as q,e as c,f as a,w as t,g as n,l as A,m as p,h as M,o as T,i as v,t as u,s as x,P as H,q as J,v as K,x as L}from"./index-D-6dhutF.js";const Q={class:"task content-container"},W={class:"table-container"},X={class:"table-header"},Y={class:"left"},Z={class:"right"},ee=["onClick"],ae={class:"danger"},te={__name:"list",setup(oe){const y=M(),_=G(!1),{t:l}=E(),s=g({taskGroupName:"",taskName:""}),w=R(()=>[{title:l("task.group.name"),dataIndex:"taskGroupName",key:"taskGroupName"},{title:l("task.group.createTime"),dataIndex:"createTime",key:"createTime",sorter:!0},{title:l("task.group.updateTime"),dataIndex:"updateTime",key:"updateTime",sorter:!0},{title:l("common.operation"),key:"action",fixed:"right",width:180}]),b=G([]),r=g({current:1,pageSize:10,total:0}),N=g({sorterField:void 0,sorterOrder:void 0}),C=()=>{r.current=1,m()},S=()=>{s.taskGroupName="",s.taskName="",C()},I=(e,o,i)=>{Object.assign(r,e),Object.assign(N,{sorterField:i.field,sorterOrder:i.order}),m()},O=()=>{y.push("/taskGroup/create")},P=e=>{y.push(`/taskGroup/edit/${e.id}`)},B=async e=>{try{const o=await L("taskGroup.delete",{},{urlParams:{id:e.id}});o.code===0?(p.success(l("common.deleteSuccess")),m()):p.error(o.message)}catch{p.error(l("common.deleteFailed"))}},m=async()=>{_.value=!0;try{const e=await A("taskGroup.list",{page:r.current,pageSize:r.pageSize,...s,...N});e.code===0?(b.value=e.data.list,r.total=e.data.total):p.error(e.message)}finally{_.value=!1}};return U(async()=>{m()}),(e,o)=>{const i=n("a-input"),f=n("a-form-item"),k=n("a-button"),h=n("a-space"),D=n("a-form"),F=n("a-popconfirm"),V=n("a-table");return T(),q("div",Q,[c("div",W,[c("div",X,[c("div",Y,[a(D,{layout:"inline",model:s},{default:t(()=>[a(f,{label:e.$t("task.search.taskGroupName")},{default:t(()=>[a(i,{value:s.taskGroupName,"onUpdate:value":o[0]||(o[0]=d=>s.taskGroupName=d),placeholder:e.$t("common.inputPlaceholder"),"allow-clear":""},null,8,["value","placeholder"])]),_:1},8,["label"]),a(f,{label:e.$t("task.search.taskName")},{default:t(()=>[a(i,{value:s.taskName,"onUpdate:value":o[1]||(o[1]=d=>s.taskName=d),placeholder:e.$t("common.inputPlaceholder"),"allow-clear":""},null,8,["value","placeholder"])]),_:1},8,["label"]),a(f,null,{default:t(()=>[a(h,null,{default:t(()=>[a(k,{type:"primary",onClick:C},{default:t(()=>[v(u(e.$t("common.search")),1)]),_:1}),a(k,{onClick:S},{default:t(()=>[v(u(e.$t("common.reset")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),c("div",Z,[a(h,null,{default:t(()=>[a(k,{type:"primary",onClick:O},{icon:t(()=>[a(x(H))]),default:t(()=>[v(" "+u(e.$t("task.group.create")),1)]),_:1})]),_:1})])]),a(V,{columns:w.value,"data-source":b.value,loading:_.value,pagination:r,showSorterTooltip:!1,onChange:I},{bodyCell:t(({column:d,record:$})=>[d.key==="action"?(T(),J(h,{key:0},{default:t(()=>[c("a",{onClick:j=>P($)},u(e.$t("common.edit")),9,ee),a(F,{title:e.$t("common.deleteConfirm"),onConfirm:j=>B($)},{default:t(()=>[c("a",ae,u(e.$t("common.delete")),1)]),_:2},1032,["title","onConfirm"])]),_:2},1024)):K("",!0)]),_:1},8,["columns","data-source","loading","pagination"])])])}}},ne=z(te,[["__scopeId","data-v-85247d7e"]]);export{ne as default};
