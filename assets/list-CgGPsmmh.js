import{r as T,c as U,e as v,d as q,p as A,f as w,g as d,h as t,w as a,i as n,q as M,v as k,j as x,o as C,k as m,t as r,m as H,P as J,x as S,n as K,F as L,y as Q}from"./index-BJO30-mH.js";const W={class:"content-container"},X={class:"table-container"},Y={class:"table-header"},Z={class:"left"},ee={class:"right"},te=["onClick"],se={__name:"list",setup(ae){const N=x(),f=T(!1),{t:l}=U(),s=v({taskGroupName:"",taskName:""}),F=q(()=>[{title:l("task.group.name"),dataIndex:"taskGroupName",key:"taskGroupName"},{title:l("task.group.statistics"),key:"statistics"},{title:l("task.group.createTime"),dataIndex:"createTime",key:"createTime",sorter:!0},{title:l("task.group.updateTime"),dataIndex:"updateTime",key:"updateTime",sorter:!0},{title:l("common.operation"),key:"action"}]),b=T([]),c=v({current:1,pageSize:10,total:0}),$=v({sorterField:void 0,sorterOrder:void 0}),G=()=>{c.current=1,p()},O=()=>{s.taskGroupName="",s.taskName="",G()},P=(e,o,u)=>{Object.assign(c,e),Object.assign($,{sorterField:u.field,sorterOrder:u.order}),p()},B=()=>{N.push("/taskGroup/create")},D=e=>{N.push(`/taskGroup/edit/${e.id}`)},I=async e=>{try{const o=await Q("taskGroup.delete",{},{urlParams:{id:e.id}});o.code===0?(k.success(l("common.deleteSuccess")),p()):k.error(o.message)}catch{k.error(l("common.deleteFailed"))}},p=async()=>{f.value=!0;try{const e=await M("taskGroup.list",{page:c.current,pageSize:c.pageSize,...s,...$});e.code===0?(b.value=e.data.list,c.total=e.data.total):k.error(e.message)}finally{f.value=!1}};return A(async()=>{p()}),(e,o)=>{const u=n("a-input"),h=n("a-form-item"),g=n("a-button"),y=n("a-space"),V=n("a-form"),j=n("a-typography-text"),z=n("a-popconfirm"),E=n("a-table");return C(),w("div",W,[d("div",X,[d("div",Y,[d("div",Z,[t(V,{layout:"inline",model:s},{default:a(()=>[t(h,{label:e.$t("task.search.taskGroupName")},{default:a(()=>[t(u,{value:s.taskGroupName,"onUpdate:value":o[0]||(o[0]=i=>s.taskGroupName=i),placeholder:e.$t("common.inputPlaceholder"),"allow-clear":""},null,8,["value","placeholder"])]),_:1},8,["label"]),t(h,{label:e.$t("task.search.taskName")},{default:a(()=>[t(u,{value:s.taskName,"onUpdate:value":o[1]||(o[1]=i=>s.taskName=i),placeholder:e.$t("common.inputPlaceholder"),"allow-clear":""},null,8,["value","placeholder"])]),_:1},8,["label"]),t(h,null,{default:a(()=>[t(y,null,{default:a(()=>[t(g,{type:"primary",onClick:G},{default:a(()=>[m(r(e.$t("common.search")),1)]),_:1}),t(g,{onClick:O},{default:a(()=>[m(r(e.$t("common.reset")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),d("div",ee,[t(y,null,{default:a(()=>[t(g,{type:"primary",onClick:B},{icon:a(()=>[t(H(J))]),default:a(()=>[m(" "+r(e.$t("task.group.create")),1)]),_:1})]),_:1})])]),t(E,{columns:F.value,"data-source":b.value,loading:f.value,pagination:c,showSorterTooltip:!1,onChange:P},{bodyCell:a(({column:i,record:_})=>[i.key==="statistics"?(C(),w(L,{key:0},[m(r(_.enrolledCount)+"/"+r(_.completedCount),1)],64)):S("",!0),i.key==="action"?(C(),K(y,{key:1},{default:a(()=>[d("a",{onClick:R=>D(_)},r(e.$t("common.edit")),9,te),t(z,{title:e.$t("common.deleteConfirm"),onConfirm:R=>I(_)},{default:a(()=>[d("a",null,[t(j,{type:"danger"},{default:a(()=>[m(r(e.$t("common.delete")),1)]),_:1})])]),_:2},1032,["title","onConfirm"])]),_:2},1024)):S("",!0)]),_:1},8,["columns","data-source","loading","pagination"])])])}}};export{se as default};
