import{_ as le,r as m,a as A,n as ne,b as x,d as y,c as a,w as t,e as d,o as f,h as n,t as j,k as S,l as U,F as oe,j as se,m as b}from"./index-DYCLiFn2.js";const ue={class:"account content-container"},re={class:"table-container"},de={class:"table-header"},ie={class:"left"},me={class:"right"},pe=["onClick"],ve=["onClick"],fe={__name:"index",setup(ce){const L=m(!1),c=m(!1),D=m(!1),_=m("add"),q=m(),g=m(!1),O=m(!1),E=m(null),w=A({username:""}),s=A({username:"",password:"",description:""}),r=A({menus:[],task:[],taskAudit:[],member:[],accountAudit:[],group:[]}),P={username:[{required:!0,message:"请输入用户名"}],password:[{required:!0,message:"请输入密码",trigger:"change"}]},z=[{key:"task",title:"任务管理"},{key:"taskAudit",title:"任务审核"},{key:"accountAudit",title:"账号审核"},{key:"member",title:"会员管理"},{key:"settlement",title:"结算管理"},{key:"channel",title:"渠道管理"},{key:"group",title:"群组管理"},{key:"account",title:"账号管理"},{key:"article",title:"文章管理"}],G=[{title:"账号名称",dataIndex:"username",key:"username"},{title:"账号说明",dataIndex:"description",key:"description"},{title:"操作",key:"action",width:200}],B=m([]),C=A({current:1,pageSize:10,total:0}),H=ne(()=>_.value==="add"?"添加账号":"编辑账号"),F=()=>{C.current=1,k()},J=()=>{w.username="",F()},K=u=>{Object.assign(C,u),k()},M=()=>{_.value="add",s.username="",s.password="",s.description="",c.value=!0},Q=u=>{_.value="edit",s.username=u.username,s.password="",s.description=u.description,c.value=!0},W=async u=>{try{b.success("删除成功"),k()}catch{b.error("删除失败")}},X=u=>{E.value=u,g.value=!0},Y=async()=>{try{O.value=!0,b.success("权限设置成功"),g.value=!1}catch{b.error("权限设置失败")}finally{O.value=!1}},Z=async()=>{try{await q.value.validate(),D.value=!0,b.success(_.value==="add"?"添加成功":"编辑成功"),c.value=!1,k()}catch(u){console.error(u)}finally{D.value=!1}},k=async()=>{L.value=!0;try{B.value=[{username:"admin",description:"管理员",isAdmin:!0},{username:"user",description:"用户",isAdmin:!1}],C.total=0}finally{L.value=!1}};return k(),(u,e)=>{const N=d("a-input"),i=d("a-form-item"),V=d("a-button"),R=d("a-space"),$=d("a-form"),h=d("a-popconfirm"),ee=d("a-table"),ae=d("a-input-password"),te=d("a-textarea"),T=d("a-modal"),o=d("a-checkbox"),p=d("a-checkbox-group");return f(),x("div",ue,[y("div",re,[y("div",de,[y("div",ie,[a($,{layout:"inline",model:w},{default:t(()=>[a(i,{label:"账号名称"},{default:t(()=>[a(N,{value:w.username,"onUpdate:value":e[0]||(e[0]=l=>w.username=l),placeholder:"请输入账号名称","allow-clear":""},null,8,["value"])]),_:1}),a(i,null,{default:t(()=>[a(R,null,{default:t(()=>[a(V,{type:"primary",onClick:F},{default:t(()=>[n(j(u.$t("common.search")),1)]),_:1}),a(V,{onClick:J},{default:t(()=>[n(j(u.$t("common.reset")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),y("div",me,[a(V,{type:"primary",onClick:M},{default:t(()=>e[12]||(e[12]=[n(" 添加账号 ")])),_:1})])]),a(ee,{columns:G,"data-source":B.value,loading:L.value,pagination:C,onChange:K},{bodyCell:t(({column:l,record:v})=>[l.key==="action"?(f(),S(R,{key:0},{default:t(()=>[v.isAdmin?U("",!0):(f(),x("a",{key:0,onClick:I=>X(v)},"权限设置",8,pe)),v.isAdmin?U("",!0):(f(),x("a",{key:1,onClick:I=>Q(v)},"编辑",8,ve)),v.isAdmin?U("",!0):(f(),S(h,{key:2,title:"确定要删除该账号吗？",onConfirm:I=>W(v)},{default:t(()=>e[13]||(e[13]=[y("a",{class:"danger"},"删除",-1)])),_:2},1032,["onConfirm"]))]),_:2},1024)):U("",!0)]),_:1},8,["data-source","loading","pagination"])]),a(T,{visible:c.value,"onUpdate:visible":e[4]||(e[4]=l=>c.value=l),title:H.value,confirmLoading:D.value,onOk:Z},{default:t(()=>[a($,{ref_key:"formRef",ref:q,model:s,rules:P,"label-col":{span:6},"wrapper-col":{span:16}},{default:t(()=>[a(i,{label:"用户名",name:"username"},{default:t(()=>[a(N,{value:s.username,"onUpdate:value":e[1]||(e[1]=l=>s.username=l),placeholder:"请输入用户名"},null,8,["value"])]),_:1}),a(i,{label:"密码",name:"password",required:_.value==="add"},{default:t(()=>[a(ae,{value:s.password,"onUpdate:value":e[2]||(e[2]=l=>s.password=l),placeholder:"请输入密码"},null,8,["value"])]),_:1},8,["required"]),a(i,{label:"账号说明",name:"description"},{default:t(()=>[a(te,{value:s.description,"onUpdate:value":e[3]||(e[3]=l=>s.description=l),placeholder:"请输入账号说明",rows:4},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible","title","confirmLoading"]),a(T,{visible:g.value,"onUpdate:visible":e[11]||(e[11]=l=>g.value=l),title:"权限设置",width:700,confirmLoading:O.value,onOk:Y},{default:t(()=>[a($,{"label-col":{span:4},"wrapper-col":{span:20}},{default:t(()=>[a(i,{label:"导航权限"},{default:t(()=>[a(p,{value:r.menus,"onUpdate:value":e[5]||(e[5]=l=>r.menus=l)},{default:t(()=>[(f(),x(oe,null,se(z,l=>a(o,{key:l.key,value:l.key},{default:t(()=>[n(j(l.title),1)]),_:2},1032,["value"])),64))]),_:1},8,["value"])]),_:1}),a(i,{label:"任务权限"},{default:t(()=>[a(p,{value:r.task,"onUpdate:value":e[6]||(e[6]=l=>r.task=l)},{default:t(()=>[a(o,{value:"create"},{default:t(()=>e[14]||(e[14]=[n("新增任务")])),_:1}),a(o,{value:"edit"},{default:t(()=>e[15]||(e[15]=[n("编辑任务")])),_:1}),a(o,{value:"view"},{default:t(()=>e[16]||(e[16]=[n("查看任务")])),_:1}),a(o,{value:"delete"},{default:t(()=>e[17]||(e[17]=[n("删除任务")])),_:1})]),_:1},8,["value"])]),_:1}),a(i,{label:"任务审核"},{default:t(()=>[a(p,{value:r.taskAudit,"onUpdate:value":e[7]||(e[7]=l=>r.taskAudit=l)},{default:t(()=>[a(o,{value:"view"},{default:t(()=>e[18]||(e[18]=[n("查看任务")])),_:1}),a(o,{value:"approve"},{default:t(()=>e[19]||(e[19]=[n("审核通过")])),_:1}),a(o,{value:"reject"},{default:t(()=>e[20]||(e[20]=[n("审核拒绝")])),_:1})]),_:1},8,["value"])]),_:1}),a(i,{label:"会员权限"},{default:t(()=>[a(p,{value:r.member,"onUpdate:value":e[8]||(e[8]=l=>r.member=l)},{default:t(()=>[a(o,{value:"create"},{default:t(()=>e[21]||(e[21]=[n("添加会员")])),_:1}),a(o,{value:"view"},{default:t(()=>e[22]||(e[22]=[n("查看会员")])),_:1}),a(o,{value:"edit"},{default:t(()=>e[23]||(e[23]=[n("编辑会员")])),_:1}),a(o,{value:"delete"},{default:t(()=>e[24]||(e[24]=[n("删除会员")])),_:1})]),_:1},8,["value"])]),_:1}),a(i,{label:"账号审核"},{default:t(()=>[a(p,{value:r.accountAudit,"onUpdate:value":e[9]||(e[9]=l=>r.accountAudit=l)},{default:t(()=>[a(o,{value:"approve"},{default:t(()=>e[25]||(e[25]=[n("审核通过")])),_:1}),a(o,{value:"reject"},{default:t(()=>e[26]||(e[26]=[n("审核拒绝")])),_:1})]),_:1},8,["value"])]),_:1}),a(i,{label:"群组权限"},{default:t(()=>[a(p,{value:r.group,"onUpdate:value":e[10]||(e[10]=l=>r.group=l)},{default:t(()=>[a(o,{value:"create"},{default:t(()=>e[27]||(e[27]=[n("添加群组")])),_:1}),a(o,{value:"view"},{default:t(()=>e[28]||(e[28]=[n("查看群组")])),_:1}),a(o,{value:"edit"},{default:t(()=>e[29]||(e[29]=[n("编辑群组")])),_:1}),a(o,{value:"delete"},{default:t(()=>e[30]||(e[30]=[n("删除群组")])),_:1})]),_:1},8,["value"])]),_:1})]),_:1})]),_:1},8,["visible","confirmLoading"])])}}},ke=le(fe,[["__scopeId","data-v-1430e1a0"]]);export{ke as default};
