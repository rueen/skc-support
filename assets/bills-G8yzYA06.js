import{_ as A,i as G,j as I,r as O,a as $,k as H,b as o,d as h,c as s,w as l,e as c,l as J,m as P,f as Q,o as a,F as p,n as B,p as g,h as _,t as u,q as k,g as b,K as X,M as Y}from"./index-BCP0ziDU.js";const Z={class:"other-bill content-container"},ee={class:"table-container"},te={class:"table-header"},ae={class:"left"},le=["onClick"],ne={key:0},se=["onClick"],oe={key:0},ie={key:1},ue={__name:"bills",setup(ce){const m=G(),S=Q(),D=I(()=>m.loaded?m.getEnumOptions("BillType"):[]),F=I(()=>m.loaded?m.getEnumOptions("SettlementStatus"):[]),f=O(!1),i=$({memberNickname:"",billType:void 0,settlementStatus:void 0}),M=t=>{Y.error({title:"结算失败原因",content:t.failureReason})},R=[{title:"会员昵称",key:"memberNickname"},{title:"账单类型",dataIndex:"billType",key:"billType"},{title:"关联任务",key:"taskName"},{title:"金额",dataIndex:"amount",key:"amount",align:"right"},{title:"创建时间",dataIndex:"createTime",key:"createTime"},{title:"状态",key:"settlementStatus"}],T=O([]),r=$({current:1,pageSize:10,total:0}),w=()=>{r.current=1,v()},V=()=>{Object.assign(i,{memberNickname:"",billType:void 0,settlementStatus:void 0}),w()},j=t=>{Object.assign(r,t),v()},z=t=>{S.push(`/member/view/${t.memberId}`)},U=t=>{S.push(`/submitted-tasks/detail/${t.submittedId}`)},v=async()=>{f.value=!0;try{const t=await J("finance.bills",{page:r.current,pageSize:r.pageSize,...i});t.code===0?(T.value=t.data.list,r.total=t.data.total):P.error(t.message)}finally{f.value=!1}};return H(()=>{v()}),(t,d)=>{const q=c("a-input"),y=c("a-form-item"),C=c("a-select-option"),N=c("a-select"),x=c("a-button"),K=c("a-space"),L=c("a-form"),W=c("a-table");return a(),o("div",Z,[h("div",ee,[h("div",te,[h("div",ae,[s(L,{layout:"inline",model:i},{default:l(()=>[s(y,{label:"会员昵称"},{default:l(()=>[s(q,{value:i.memberNickname,"onUpdate:value":d[0]||(d[0]=e=>i.memberNickname=e),placeholder:"请输入会员昵称","allow-clear":""},null,8,["value"])]),_:1}),s(y,{label:"账单类型"},{default:l(()=>[s(N,{value:i.billType,"onUpdate:value":d[1]||(d[1]=e=>i.billType=e),placeholder:"请选择账单类型",style:{width:"120px"},"allow-clear":""},{default:l(()=>[(a(!0),o(p,null,B(D.value,e=>(a(),g(C,{key:e.value,value:e.value},{default:l(()=>[_(u(e.text),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1}),s(y,{label:"结算状态"},{default:l(()=>[s(N,{value:i.settlementStatus,"onUpdate:value":d[2]||(d[2]=e=>i.settlementStatus=e),placeholder:"请选择结算状态",style:{width:"120px"},"allow-clear":""},{default:l(()=>[(a(!0),o(p,null,B(F.value,e=>(a(),g(C,{key:e.value,value:e.value},{default:l(()=>[_(u(e.text),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1}),s(y,null,{default:l(()=>[s(K,null,{default:l(()=>[s(x,{type:"primary",onClick:w},{default:l(()=>[_(u(t.$t("common.search")),1)]),_:1}),s(x,{onClick:V},{default:l(()=>[_(u(t.$t("common.reset")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])])]),s(W,{columns:R,"data-source":T.value,loading:f.value,pagination:r,onChange:j},{bodyCell:l(({column:e,record:n})=>[e.key==="memberNickname"?(a(),o("a",{key:0,onClick:E=>z(n)},u(n.memberNickname),9,le)):k("",!0),e.key==="taskName"?(a(),o(p,{key:1},[n.billType==="withdrawal"?(a(),o("span",ne,"--")):(a(),o("a",{key:1,onClick:E=>U(n)},u(n.taskName),9,se))],64)):k("",!0),e.key==="billType"?(a(),o(p,{key:2},[_(u(b(m).getEnumText("BillType",n.billType)),1)],64)):k("",!0),e.key==="settlementStatus"?(a(),o(p,{key:3},[n.billType==="withdrawal"?(a(),o("span",oe,u(b(m).getEnumText("WithdrawalStatus",n.withdrawalStatus)),1)):(a(),o("span",ie,u(b(m).getEnumText("SettlementStatus",n.settlementStatus)),1)),n.settlementStatus==="failed"||n.withdrawalStatus==="failed"?(a(),g(b(X),{key:2,class:"status-icon",onClick:E=>M(n)},null,8,["onClick"])):k("",!0)],64)):k("",!0)]),_:1},8,["data-source","loading","pagination"])])])}}},re=A(ue,[["__scopeId","data-v-58ab0c77"]]);export{re as default};
