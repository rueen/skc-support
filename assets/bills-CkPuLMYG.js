import{_ as L,i as W,j as N,r as I,a as E,k as A,b as o,d as h,c as n,w as t,e as u,l as G,m as H,o as a,F as p,n as O,p as g,h as _,t as c,q as k,g as f,K as J,M as P}from"./index-D398LZoF.js";const Q={class:"other-bill content-container"},X={class:"table-container"},Y={class:"table-header"},Z={class:"left"},ee={key:0},te=["onClick"],ae={key:0},le={key:1},ne={__name:"bills",setup(se){const d=W(),B=N(()=>d.loaded?d.getEnumOptions("BillType"):[]),D=N(()=>d.loaded?d.getEnumOptions("SettlementStatus"):[]),b=I(!1),i=E({memberNickname:"",billType:void 0,settlementStatus:void 0}),F=l=>{P.error({title:"结算失败原因",content:l.failureReason})},V=[{title:"会员昵称",dataIndex:"memberNickname",key:"memberNickname"},{title:"账单类型",dataIndex:"billType",key:"billType"},{title:"关联任务",key:"taskName"},{title:"金额",dataIndex:"amount",key:"amount",align:"right"},{title:"创建时间",dataIndex:"createTime",key:"createTime"},{title:"状态",key:"settlementStatus"}],S=I([]),r=E({current:1,pageSize:10,total:0}),T=()=>{r.current=1,v()},$=()=>{Object.assign(i,{memberNickname:"",billType:void 0,settlementStatus:void 0}),T()},j=l=>{Object.assign(r,l),v()},z=l=>{},v=async()=>{b.value=!0;try{const l=await G("finance.bills",{page:r.current,pageSize:r.pageSize,...i});l.code===0?(S.value=l.data.list,r.total=l.data.total):H.error(l.message)}finally{b.value=!1}};return A(()=>{v()}),(l,m)=>{const M=u("a-input"),y=u("a-form-item"),w=u("a-select-option"),x=u("a-select"),C=u("a-button"),R=u("a-space"),U=u("a-form"),q=u("a-table");return a(),o("div",Q,[h("div",X,[h("div",Y,[h("div",Z,[n(U,{layout:"inline",model:i},{default:t(()=>[n(y,{label:"会员昵称"},{default:t(()=>[n(M,{value:i.memberNickname,"onUpdate:value":m[0]||(m[0]=e=>i.memberNickname=e),placeholder:"请输入会员昵称","allow-clear":""},null,8,["value"])]),_:1}),n(y,{label:"账单类型"},{default:t(()=>[n(x,{value:i.billType,"onUpdate:value":m[1]||(m[1]=e=>i.billType=e),placeholder:"请选择账单类型",style:{width:"120px"},"allow-clear":""},{default:t(()=>[(a(!0),o(p,null,O(B.value,e=>(a(),g(w,{key:e.value,value:e.value},{default:t(()=>[_(c(e.text),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1}),n(y,{label:"结算状态"},{default:t(()=>[n(x,{value:i.settlementStatus,"onUpdate:value":m[2]||(m[2]=e=>i.settlementStatus=e),placeholder:"请选择结算状态",style:{width:"120px"},"allow-clear":""},{default:t(()=>[(a(!0),o(p,null,O(D.value,e=>(a(),g(w,{key:e.value,value:e.value},{default:t(()=>[_(c(e.text),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1}),n(y,null,{default:t(()=>[n(R,null,{default:t(()=>[n(C,{type:"primary",onClick:T},{default:t(()=>[_(c(l.$t("common.search")),1)]),_:1}),n(C,{onClick:$},{default:t(()=>[_(c(l.$t("common.reset")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])])]),n(q,{columns:V,"data-source":S.value,loading:b.value,pagination:r,onChange:j},{bodyCell:t(({column:e,record:s})=>[e.key==="taskName"?(a(),o(p,{key:0},[s.billType==="withdrawal"?(a(),o("span",ee,"--")):(a(),o("a",{key:1,onClick:K=>z(s.taskId)},c(s.taskName),9,te))],64)):k("",!0),e.key==="billType"?(a(),o(p,{key:1},[_(c(f(d).getEnumText("BillType",s.billType)),1)],64)):k("",!0),e.key==="settlementStatus"?(a(),o(p,{key:2},[s.billType==="withdrawal"?(a(),o("span",ae,c(f(d).getEnumText("WithdrawalStatus",s.withdrawalStatus)),1)):(a(),o("span",le,c(f(d).getEnumText("SettlementStatus",s.settlementStatus)),1)),s.settlementStatus==="failed"||s.withdrawalStatus==="failed"?(a(),g(f(J),{key:2,class:"status-icon",onClick:K=>F(s)},null,8,["onClick"])):k("",!0)],64)):k("",!0)]),_:1},8,["data-source","loading","pagination"])])])}}},ie=L(ne,[["__scopeId","data-v-a8ef2a8f"]]);export{ie as default};
