import{a as H,b as J,r as O,c as y,j as I,k as K,d as x,e as d,f as t,w as a,g as o,l as Q,m as k,h as W,o as _,F as X,n as Y,p as E,i as u,t as c,s as Z,v as ee}from"./index-B08LfmyH.js";const te={class:"ad content-container"},ae={class:"table-container"},se={class:"table-header"},oe={class:"left"},ne={class:"right"},le=["onClick"],de={__name:"index",setup(re){const b=W(),f=H(),{t:r}=J(),g=O(!1),l=y({title:"",status:void 0}),F=I(()=>f.loaded?f.getEnumOptions("MessagesStatus"):[]),j=I(()=>[{title:r("messages.title"),dataIndex:"title",key:"title"},{title:r("messages.status"),dataIndex:"status",key:"status",customRender:({text:e})=>f.getEnumText("MessagesStatus",e)},{title:r("common.startTime"),dataIndex:"startTime",key:"startTime",sorter:!0},{title:r("common.endTime"),dataIndex:"endTime",key:"endTime",sorter:!0},{title:r("common.updateTime"),dataIndex:"updateTime",key:"updateTime",sorter:!0},{title:r("common.operation"),key:"action",width:200}]),C=O([]),i=y({current:1,pageSize:10,total:0}),T=y({sorterField:void 0,sorterOrder:void 0}),$=()=>{i.current=1,m()},B=()=>{Object.assign(l,{title:"",status:void 0}),$()},D=(e,s,p)=>{Object.assign(i,e),Object.assign(T,{sorterField:p.field,sorterOrder:p.order}),m()},N=async e=>{try{const s=await ee("messages.delete",{id:e.id},{urlParams:{id:e.id}});s.code===0?(k.success(s.message),m()):k.error(s.message)}catch(s){console.error(s)}},V=()=>{b.push("/messages/create")},z=e=>{b.push(`/messages/edit/${e.id}`)},m=async()=>{g.value=!0;try{const e=await Q("messages.list",{page:i.current,pageSize:i.pageSize,...T,...l});e.code===0?(C.value=e.data.list,i.total=e.data.total):k.error(e.message)}finally{g.value=!1}};return K(()=>{m()}),(e,s)=>{const p=o("a-input"),h=o("a-form-item"),M=o("a-select-option"),P=o("a-select"),v=o("a-button"),S=o("a-space"),R=o("a-form"),U=o("plus-outlined"),A=o("a-typography-text"),L=o("a-popconfirm"),q=o("a-table");return _(),x("div",te,[d("div",ae,[d("div",se,[d("div",oe,[t(R,{layout:"inline",model:l},{default:a(()=>[t(h,{label:e.$t("messages.title")},{default:a(()=>[t(p,{value:l.title,"onUpdate:value":s[0]||(s[0]=n=>l.title=n),placeholder:e.$t("common.inputPlaceholder"),"allow-clear":""},null,8,["value","placeholder"])]),_:1},8,["label"]),t(h,{label:e.$t("messages.status")},{default:a(()=>[t(P,{value:l.status,"onUpdate:value":s[1]||(s[1]=n=>l.status=n),placeholder:e.$t("common.selectPlaceholder"),allowClear:"",style:{width:"120px"}},{default:a(()=>[(_(!0),x(X,null,Y(F.value,n=>(_(),E(M,{key:n.value,value:n.value},{default:a(()=>[u(c(n.text),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"])]),_:1},8,["label"]),t(h,null,{default:a(()=>[t(S,null,{default:a(()=>[t(v,{type:"primary",onClick:$},{default:a(()=>[u(c(e.$t("common.search")),1)]),_:1}),t(v,{onClick:B},{default:a(()=>[u(c(e.$t("common.reset")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),d("div",ne,[t(v,{type:"primary",onClick:V},{default:a(()=>[t(U),u(" "+c(e.$t("messages.add")),1)]),_:1})])]),t(q,{columns:j.value,"data-source":C.value,loading:g.value,pagination:i,showSorterTooltip:!1,onChange:D},{bodyCell:a(({column:n,record:w})=>[n.key==="action"?(_(),E(S,{key:0},{default:a(()=>[d("a",{onClick:G=>z(w)},c(e.$t("common.edit")),9,le),t(L,{title:e.$t("common.deleteConfirm"),onConfirm:G=>N(w)},{default:a(()=>[d("a",null,[t(A,{type:"danger"},{default:a(()=>[u(c(e.$t("common.delete")),1)]),_:1})])]),_:2},1032,["title","onConfirm"])]),_:2},1024)):Z("",!0)]),_:1},8,["columns","data-source","loading","pagination"])])])}}};export{de as default};
