import{_ as ce,j as ie,r as v,a as F,k as re,b as h,d as l,c as o,w as n,e as i,i as r,o as c,F as R,l as U,m,h as d,t as p,g as O,n as _}from"./index-BwMLN0UP.js";import{A as w,g as de,i as pe,j as fe}from"./enums-Vx4wKXVy.js";import{g as z,p as P}from"./request-B79zla8s.js";const ve={class:"account content-container"},me={class:"table-container"},_e={class:"table-header"},ge={class:"left"},ye={class:"right"},he={key:0,class:"account-info"},ke={class:"home-url"},be={class:"link-text-container"},Ce=["href"],Se={class:"stats"},we={class:"stat-item"},Ae={class:"stat-item"},xe={class:"stat-item"},Ie={key:1},Ne={class:"group-name"},je={__name:"list",setup(Re){const{locale:K}=ie(),A=v(!1),f=v([]),k=v(!1),x=v(!1),g=v(""),y=F({current:1,pageSize:10,total:0,showTotal:e=>`共 ${e} 条`}),u=F({account:"",channelId:void 0,accountAuditStatus:void 0,groupId:void 0}),B=v([]),D=v([]),M=[{title:"账号",dataIndex:"account",key:"account"},{title:"平台渠道",dataIndex:"channelName",key:"channelName"},{title:"账号信息",key:"accountInfo"},{title:"会员信息",key:"member"},{title:"审核状态",dataIndex:"accountAuditStatus",key:"accountAuditStatus"},{title:"操作",key:"action",fixed:"right",width:180}],L=v([{id:1,account:"test123",channelName:"抖音",channelId:1,homeUrl:"https://example.com/test123",fansCount:1e3,postsCount:50,memberNickname:"测试会员1",groupName:"群组1",accountAuditStatus:w.PENDING}]),q=e=>{f.value=e},T=e=>de(pe,e,K.value),H=e=>fe[e],G=()=>{y.current=1,b()},J=()=>{u.account="",u.channelId=void 0,u.accountAuditStatus=void 0,u.groupId=void 0,G()},Q=e=>{Object.assign(y,{current:e.current,pageSize:e.pageSize}),b()},W=async()=>{if(!f.value.length){r.warning("请选择要通过的账号");return}try{const e=await P("account.batchResolve",{ids:f.value});e.code===0?(r.success("操作成功"),f.value=[],b()):r.error(e.message)}catch(e){console.log(e)}},X=async()=>{if(!f.value.length){r.warning("请选择要拒绝的账号");return}g.value="",k.value=!0},Y=e=>{f.value=[e.id],g.value="",k.value=!0},Z=async()=>{if(!g.value){r.error("请输入拒绝原因");return}x.value=!0;try{const e=await P("account.batchReject",{ids:f.value,reason:g.value});e.code===0?(r.success("操作成功"),f.value=[],k.value=!1,b()):r.error(e.message)}catch(e){console.log(e)}finally{x.value=!1}},b=async()=>{A.value=!0;try{const e=await z("account.list",{params:{page:y.current,pageSize:y.pageSize,...u}});e.code===0?(L.value=e.data.list,y.total=e.data.total):r.error(e.message)}finally{A.value=!1}},ee=async()=>{const e=await z("channel.list");e.code===0&&(B.value=e.data.list)},te=async(e="")=>{try{const t=await z("group.list",{params:{page:1,pageSize:50,keyword:e}});t.code===0&&(D.value=t.data.list||[])}catch{r.error("获取群组列表失败")}},ae=e=>{navigator.clipboard.writeText(e).then(()=>{r.success("复制成功")}).catch(()=>{r.error("复制失败")})};return re(()=>{b(),te(),ee()}),(e,t)=>{const ne=i("a-input"),C=i("a-form-item"),I=i("a-select-option"),N=i("a-select"),S=i("a-button"),j=i("a-space"),oe=i("a-form"),V=i("a-tag"),E=i("a-popconfirm"),le=i("a-table"),se=i("a-textarea"),ue=i("a-modal");return c(),h("div",ve,[l("div",me,[l("div",_e,[l("div",ge,[o(oe,{layout:"inline",model:u},{default:n(()=>[o(C,{label:"账号"},{default:n(()=>[o(ne,{value:u.account,"onUpdate:value":t[0]||(t[0]=a=>u.account=a),placeholder:"请输入账号","allow-clear":""},null,8,["value"])]),_:1}),o(C,{label:"平台渠道"},{default:n(()=>[o(N,{value:u.channelId,"onUpdate:value":t[1]||(t[1]=a=>u.channelId=a),placeholder:"请选择平台渠道",style:{width:"120px"},"allow-clear":""},{default:n(()=>[(c(!0),h(R,null,U(B.value,a=>(c(),m(I,{key:a.id,value:a.id},{default:n(()=>[d(p(a.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1}),o(C,{label:"审核状态"},{default:n(()=>[o(N,{value:u.accountAuditStatus,"onUpdate:value":t[2]||(t[2]=a=>u.accountAuditStatus=a),placeholder:"请选择审核状态",style:{width:"120px"},"allow-clear":""},{default:n(()=>[(c(!0),h(R,null,U(Object.values(O(w)),a=>(c(),m(I,{key:a,value:a},{default:n(()=>[d(p(T(a)),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1}),o(C,{label:"所属群组"},{default:n(()=>[o(N,{value:u.groupId,"onUpdate:value":t[3]||(t[3]=a=>u.groupId=a),placeholder:"请选择群组",style:{width:"120px"},"allow-clear":""},{default:n(()=>[(c(!0),h(R,null,U(D.value,a=>(c(),m(I,{key:a.id,value:a.id},{default:n(()=>[d(p(a.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1}),o(C,null,{default:n(()=>[o(j,null,{default:n(()=>[o(S,{type:"primary",onClick:G},{default:n(()=>t[6]||(t[6]=[d("查询")])),_:1}),o(S,{onClick:J},{default:n(()=>t[7]||(t[7]=[d("重置")])),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),l("div",ye,[o(j,null,{default:n(()=>[o(S,{type:"primary",onClick:W},{default:n(()=>t[8]||(t[8]=[d("批量通过")])),_:1}),o(S,{danger:"",onClick:X},{default:n(()=>t[9]||(t[9]=[d("批量拒绝")])),_:1})]),_:1})])]),o(le,{columns:M,"data-source":L.value,loading:A.value,pagination:y,"row-selection":{selectedRowKeys:f.value,onChange:q},onChange:Q},{bodyCell:n(({column:a,record:s})=>[a.key==="accountInfo"?(c(),h("div",he,[l("div",ke,[l("div",be,[t[11]||(t[11]=l("span",{class:"label"},"主页：",-1)),l("a",{href:s.homeUrl,target:"_blank",class:"link-text"},p(s.homeUrl),9,Ce),o(S,{type:"link",size:"small",onClick:$=>ae(s.homeUrl)},{default:n(()=>t[10]||(t[10]=[d(" 复制 ")])),_:2},1032,["onClick"])])]),l("div",Se,[l("div",we,"粉丝数："+p(s.fansCount),1),l("div",Ae,"好友数："+p(s.friendsCount),1),l("div",xe,"发帖数："+p(s.postsCount),1)])])):_("",!0),a.key==="member"?(c(),h("div",Ie,[l("div",null,p(s.memberNickname),1),l("div",Ne,[l("span",null,p(s.groupName),1),s.isGroupOwner?(c(),m(V,{key:0,color:"blue",style:{"margin-left":"10px"}},{default:n(()=>t[12]||(t[12]=[d("群主")])),_:1})):_("",!0)])])):_("",!0),a.key==="accountAuditStatus"?(c(),m(V,{key:2,color:H(s.accountAuditStatus)},{default:n(()=>[d(p(T(s.accountAuditStatus)),1)]),_:2},1032,["color"])):_("",!0),a.key==="action"?(c(),m(j,{key:3},{default:n(()=>[s.accountAuditStatus===O(w).PENDING?(c(),m(E,{key:0,title:"确定要通过该账号吗？",onConfirm:$=>e.handleResolve(s)},{default:n(()=>t[13]||(t[13]=[l("a",null,"通过",-1)])),_:2},1032,["onConfirm"])):_("",!0),s.accountAuditStatus===O(w).PENDING?(c(),m(E,{key:1,title:"确定要拒绝该账号吗？",onConfirm:$=>Y(s)},{default:n(()=>t[14]||(t[14]=[l("a",{class:"danger"},"拒绝",-1)])),_:2},1032,["onConfirm"])):_("",!0)]),_:2},1024)):_("",!0)]),_:1},8,["data-source","loading","pagination","row-selection"])]),o(ue,{open:k.value,"onUpdate:open":t[5]||(t[5]=a=>k.value=a),title:"拒绝原因",onOk:Z,confirmLoading:x.value},{default:n(()=>[o(se,{value:g.value,"onUpdate:value":t[4]||(t[4]=a=>g.value=a),placeholder:"请输入拒绝原因",rows:4},null,8,["value"])]),_:1},8,["open","confirmLoading"])])}}},Be=ce(je,[["__scopeId","data-v-e6be2f0f"]]);export{Be as default};
