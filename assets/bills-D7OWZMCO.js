import{_ as L,l as A,m as w,r as I,a as O,n as G,b as m,d as v,c as l,w as t,e as o,p as H,j as J,o as s,F as f,q as B,s as g,h as p,t as i,v as k,g as h,K as P,M as Q}from"./index-Dp6bA9zn.js";const W={class:"other-bill content-container"},X={class:"table-container"},Y={class:"table-header"},Z={class:"left"},ee=["onClick"],te={__name:"bills",setup(ae){const u=A(),E=w(()=>u.loaded?u.getEnumOptions("BillType"):[]),D=w(()=>u.loaded?u.getEnumOptions("SettlementStatus"):[]),y=I(!1),n=O({memberNickname:"",billType:void 0,settlementStatus:void 0}),F=a=>{Q.error({title:"结算失败原因",content:a.failureReason})},V=[{title:"会员昵称",dataIndex:"memberNickname",key:"memberNickname"},{title:"账单类型",dataIndex:"billType",key:"billType"},{title:"关联任务",key:"taskName"},{title:"金额",dataIndex:"amount",key:"amount",align:"right"},{title:"创建时间",dataIndex:"createTime",key:"createTime"},{title:"结算状态",key:"settlementStatus"}],S=I([]),c=O({current:1,pageSize:10,total:0}),T=()=>{c.current=1,b()},$=()=>{Object.assign(n,{memberNickname:"",billType:void 0,settlementStatus:void 0}),T()},j=a=>{Object.assign(c,a),b()},z=a=>{},b=async()=>{y.value=!0;try{const a=await H("finance.bills",{page:c.current,pageSize:c.pageSize,...n});a.code===0?(S.value=a.data.list,c.total=a.data.total):J.error(a.message)}finally{y.value=!1}};return G(()=>{b()}),(a,r)=>{const M=o("a-input"),_=o("a-form-item"),x=o("a-select-option"),C=o("a-select"),N=o("a-button"),R=o("a-space"),U=o("a-form"),q=o("a-table");return s(),m("div",W,[v("div",X,[v("div",Y,[v("div",Z,[l(U,{layout:"inline",model:n},{default:t(()=>[l(_,{label:"会员昵称"},{default:t(()=>[l(M,{value:n.memberNickname,"onUpdate:value":r[0]||(r[0]=e=>n.memberNickname=e),placeholder:"请输入会员昵称","allow-clear":""},null,8,["value"])]),_:1}),l(_,{label:"账单类型"},{default:t(()=>[l(C,{value:n.billType,"onUpdate:value":r[1]||(r[1]=e=>n.billType=e),placeholder:"请选择账单类型",style:{width:"120px"},"allow-clear":""},{default:t(()=>[(s(!0),m(f,null,B(E.value,e=>(s(),g(x,{key:e.value,value:e.value},{default:t(()=>[p(i(e.text),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1}),l(_,{label:"结算状态"},{default:t(()=>[l(C,{value:n.settlementStatus,"onUpdate:value":r[2]||(r[2]=e=>n.settlementStatus=e),placeholder:"请选择结算状态",style:{width:"120px"},"allow-clear":""},{default:t(()=>[(s(!0),m(f,null,B(D.value,e=>(s(),g(x,{key:e.value,value:e.value},{default:t(()=>[p(i(e.text),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1}),l(_,null,{default:t(()=>[l(R,null,{default:t(()=>[l(N,{type:"primary",onClick:T},{default:t(()=>[p(i(a.$t("common.search")),1)]),_:1}),l(N,{onClick:$},{default:t(()=>[p(i(a.$t("common.reset")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])])]),l(q,{columns:V,"data-source":S.value,loading:y.value,pagination:c,onChange:j},{bodyCell:t(({column:e,record:d})=>[e.key==="taskName"?(s(),m("a",{key:0,onClick:K=>z(d.taskId)},i(d.taskName),9,ee)):k("",!0),e.key==="billType"?(s(),m(f,{key:1},[p(i(h(u).getEnumText("BillType",d.billType)),1)],64)):k("",!0),e.key==="settlementStatus"?(s(),m(f,{key:2},[p(i(h(u).getEnumText("SettlementStatus",d.settlementStatus))+" ",1),d.settlementStatus==="failed"?(s(),g(h(P),{key:0,class:"status-icon",onClick:K=>F(d)},null,8,["onClick"])):k("",!0)],64)):k("",!0)]),_:1},8,["data-source","loading","pagination"])])])}}},ne=L(te,[["__scopeId","data-v-77503f86"]]);export{ne as default};
