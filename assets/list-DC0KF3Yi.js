import{_ as F,r as C,b as O,c as $,j as R,k as T,d as U,e as c,f as a,w as t,g as n,h as q,o as G,i as h,t as i,q as A,P as M,p as H,s as J,v as K,m as u,l as L}from"./index-_Ujq24cd.js";const Q={class:"task content-container"},W={class:"table-container"},X={class:"table-header"},Y={class:"left"},Z={class:"right"},x=["onClick"],ee={class:"danger"},ae={__name:"list",setup(te){const g=q(),m=C(!1),{t:d}=O(),o=$({taskGroupName:"",taskName:""}),w=R(()=>[{title:d("task.group.name"),dataIndex:"taskGroupName",key:"taskGroupName"},{title:d("task.list.action"),key:"action",fixed:"right",width:180}]),v=C([]),l=$({current:1,pageSize:10,total:0}),y=()=>{l.current=1,p()},S=()=>{o.taskName="",o.channelId=void 0,o.taskStatus=void 0,y()},P=e=>{Object.assign(l,e),p()},B=()=>{g.push("/taskGroup/create")},D=e=>{g.push(`/taskGroup/edit/${e.id}`)},I=async e=>{try{const s=await K("task.delete",{},{urlParams:{id:e.id}});s.code===0?(u.success(d("common.deleteSuccess")),p()):u.error(s.message)}catch{u.error(d("common.deleteFailed"))}},p=async()=>{m.value=!0;try{const e=await L("task.list",{page:l.current,pageSize:l.pageSize,...o});e.code===0?(v.value=e.data.list,l.total=e.data.total):u.error(e.message)}finally{m.value=!1}};return T(async()=>{}),(e,s)=>{const b=n("a-input"),_=n("a-form-item"),k=n("a-button"),f=n("a-space"),V=n("a-form"),z=n("a-popconfirm"),j=n("a-table");return G(),U("div",Q,[c("div",W,[c("div",X,[c("div",Y,[a(V,{layout:"inline",model:o},{default:t(()=>[a(_,{label:e.$t("task.search.taskGroupName")},{default:t(()=>[a(b,{value:o.taskGroupName,"onUpdate:value":s[0]||(s[0]=r=>o.taskGroupName=r),placeholder:e.$t("common.inputPlaceholder"),"allow-clear":""},null,8,["value","placeholder"])]),_:1},8,["label"]),a(_,{label:e.$t("task.search.taskName")},{default:t(()=>[a(b,{value:o.taskName,"onUpdate:value":s[1]||(s[1]=r=>o.taskName=r),placeholder:e.$t("common.inputPlaceholder"),"allow-clear":""},null,8,["value","placeholder"])]),_:1},8,["label"]),a(_,null,{default:t(()=>[a(f,null,{default:t(()=>[a(k,{type:"primary",onClick:y},{default:t(()=>[h(i(e.$t("common.search")),1)]),_:1}),a(k,{onClick:S},{default:t(()=>[h(i(e.$t("common.reset")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),c("div",Z,[a(f,null,{default:t(()=>[a(k,{type:"primary",onClick:B},{icon:t(()=>[a(A(M))]),default:t(()=>[h(" "+i(e.$t("task.group.create")),1)]),_:1})]),_:1})])]),a(j,{columns:w.value,"data-source":v.value,loading:m.value,pagination:l,onChange:P},{bodyCell:t(({column:r,record:N})=>[r.key==="action"?(G(),H(f,{key:0},{default:t(()=>[c("a",{onClick:E=>D(N)},i(e.$t("task.list.edit")),9,x),a(z,{title:e.$t("task.list.deleteConfirm"),onConfirm:E=>I(N)},{default:t(()=>[c("a",ee,i(e.$t("task.list.delete")),1)]),_:2},1032,["title","onConfirm"])]),_:2},1024)):J("",!0)]),_:1},8,["columns","data-source","loading","pagination"])])])}}},se=F(ae,[["__scopeId","data-v-ea573937"]]);export{se as default};
