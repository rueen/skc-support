import{_ as ie,i as ce,r as f,a as F,j as re,b as h,d as l,c as o,w as n,e as c,k as r,o as i,F as R,l as U,m,h as d,t as p,g as O,n as _}from"./index-DR4_9ndD.js";import{A as w,g as de,i as pe,j as ve}from"./enums-Vx4wKXVy.js";import{g as z,p as P}from"./request-CIHGfFQX.js";const fe={class:"account content-container"},me={class:"table-container"},_e={class:"table-header"},ge={class:"left"},ye={class:"right"},he={key:0,class:"account-info"},ke={class:"home-url"},Ce={class:"link-text-container"},be=["href"],Se={class:"stats"},we={class:"stat-item"},xe={class:"stat-item"},Ie={class:"stat-item"},Ne={key:1},je={class:"group-name"},Ae={__name:"list",setup(Re){const{locale:K}=ce(),x=f(!1),v=f([]),k=f(!1),I=f(!1),g=f(""),y=F({current:1,pageSize:10,total:0,showTotal:e=>`共 ${e} 条`}),u=F({account:"",channelId:void 0,auditStatus:void 0,groupId:void 0}),B=f([]),D=f([]),M=[{title:"账号",dataIndex:"account",key:"account"},{title:"平台渠道",dataIndex:"channelName",key:"channelName"},{title:"账号信息",key:"accountInfo"},{title:"会员信息",key:"member"},{title:"审核状态",dataIndex:"auditStatus",key:"auditStatus"},{title:"操作",key:"action",fixed:"right",width:180}],L=f([{id:1,account:"test123",channelName:"抖音",channelId:1,homeUrl:"https://example.com/test123",fansCount:1e3,postsCount:50,memberNickname:"测试会员1",groupName:"群组1",auditStatus:w.PENDING}]),q=e=>{v.value=e},T=e=>de(pe,e,K.value),H=e=>ve[e],G=()=>{y.current=1,C()},J=()=>{u.account="",u.channelId=void 0,u.auditStatus=void 0,u.groupId=void 0,G()},Q=e=>{Object.assign(y,{current:e.current,pageSize:e.pageSize}),C()},W=async()=>{if(!v.value.length){r.warning("请选择要通过的账号");return}try{const e=await P("account.batchResolve",{ids:v.value});e.success?(r.success("操作成功"),v.value=[],C()):r.error(e.message)}catch(e){console.log(e)}},X=async()=>{if(!v.value.length){r.warning("请选择要拒绝的账号");return}g.value="",k.value=!0},Y=e=>{v.value=[e.id],g.value="",k.value=!0},Z=async()=>{if(!g.value){r.error("请输入拒绝原因");return}I.value=!0;try{const e=await P("account.batchReject",{ids:v.value,reason:g.value});e.success?(r.success("操作成功"),v.value=[],k.value=!1,C()):r.error(e.message)}catch(e){console.log(e)}finally{I.value=!1}},C=async()=>{x.value=!0;try{const e=await z("account.list",{params:{page:y.current,pageSize:y.pageSize,...u}});e.success?(L.value=e.data.list,y.total=e.data.total):r.error(e.message)}finally{x.value=!1}},ee=async()=>{const e=await z("channel.list");e.success&&(B.value=e.data.list)},te=async(e="")=>{try{const t=await z("group.list",{params:{page:1,pageSize:50,keyword:e}});t.success&&(D.value=t.data.list||[])}catch{r.error("获取群组列表失败")}},ae=e=>{navigator.clipboard.writeText(e).then(()=>{r.success("复制成功")}).catch(()=>{r.error("复制失败")})};return re(()=>{C(),te(),ee()}),(e,t)=>{const ne=c("a-input"),b=c("a-form-item"),N=c("a-select-option"),j=c("a-select"),S=c("a-button"),A=c("a-space"),oe=c("a-form"),V=c("a-tag"),E=c("a-popconfirm"),le=c("a-table"),se=c("a-textarea"),ue=c("a-modal");return i(),h("div",fe,[l("div",me,[l("div",_e,[l("div",ge,[o(oe,{layout:"inline",model:u},{default:n(()=>[o(b,{label:"账号"},{default:n(()=>[o(ne,{value:u.account,"onUpdate:value":t[0]||(t[0]=a=>u.account=a),placeholder:"请输入账号","allow-clear":""},null,8,["value"])]),_:1}),o(b,{label:"平台渠道"},{default:n(()=>[o(j,{value:u.channelId,"onUpdate:value":t[1]||(t[1]=a=>u.channelId=a),placeholder:"请选择平台渠道",style:{width:"120px"},"allow-clear":""},{default:n(()=>[(i(!0),h(R,null,U(B.value,a=>(i(),m(N,{key:a.id,value:a.id},{default:n(()=>[d(p(a.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1}),o(b,{label:"审核状态"},{default:n(()=>[o(j,{value:u.auditStatus,"onUpdate:value":t[2]||(t[2]=a=>u.auditStatus=a),placeholder:"请选择审核状态",style:{width:"120px"},"allow-clear":""},{default:n(()=>[(i(!0),h(R,null,U(Object.values(O(w)),a=>(i(),m(N,{key:a,value:a},{default:n(()=>[d(p(T(a)),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1}),o(b,{label:"所属群组"},{default:n(()=>[o(j,{value:u.groupId,"onUpdate:value":t[3]||(t[3]=a=>u.groupId=a),placeholder:"请选择群组",style:{width:"120px"},"allow-clear":""},{default:n(()=>[(i(!0),h(R,null,U(D.value,a=>(i(),m(N,{key:a.id,value:a.id},{default:n(()=>[d(p(a.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1}),o(b,null,{default:n(()=>[o(A,null,{default:n(()=>[o(S,{type:"primary",onClick:G},{default:n(()=>t[6]||(t[6]=[d("查询")])),_:1}),o(S,{onClick:J},{default:n(()=>t[7]||(t[7]=[d("重置")])),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),l("div",ye,[o(A,null,{default:n(()=>[o(S,{type:"primary",onClick:W},{default:n(()=>t[8]||(t[8]=[d("批量通过")])),_:1}),o(S,{danger:"",onClick:X},{default:n(()=>t[9]||(t[9]=[d("批量拒绝")])),_:1})]),_:1})])]),o(le,{columns:M,"data-source":L.value,loading:x.value,pagination:y,"row-selection":{selectedRowKeys:v.value,onChange:q},onChange:Q},{bodyCell:n(({column:a,record:s})=>[a.key==="accountInfo"?(i(),h("div",he,[l("div",ke,[l("div",Ce,[t[11]||(t[11]=l("span",{class:"label"},"主页：",-1)),l("a",{href:s.homeUrl,target:"_blank",class:"link-text"},p(s.homeUrl),9,be),o(S,{type:"link",size:"small",onClick:$=>ae(s.homeUrl)},{default:n(()=>t[10]||(t[10]=[d(" 复制 ")])),_:2},1032,["onClick"])])]),l("div",Se,[l("div",we,"粉丝数："+p(s.fansCount),1),l("div",xe,"好友数："+p(s.friendsCount),1),l("div",Ie,"发帖数："+p(s.postsCount),1)])])):_("",!0),a.key==="member"?(i(),h("div",Ne,[l("div",null,p(s.memberNickname),1),l("div",je,[l("span",null,p(s.groupName),1),s.isGroupOwner?(i(),m(V,{key:0,color:"blue",style:{"margin-left":"10px"}},{default:n(()=>t[12]||(t[12]=[d("群主")])),_:1})):_("",!0)])])):_("",!0),a.key==="auditStatus"?(i(),m(V,{key:2,color:H(s.auditStatus)},{default:n(()=>[d(p(T(s.auditStatus)),1)]),_:2},1032,["color"])):_("",!0),a.key==="action"?(i(),m(A,{key:3},{default:n(()=>[s.auditStatus===O(w).PENDING?(i(),m(E,{key:0,title:"确定要通过该账号吗？",onConfirm:$=>e.handleResolve(s)},{default:n(()=>t[13]||(t[13]=[l("a",null,"通过",-1)])),_:2},1032,["onConfirm"])):_("",!0),s.auditStatus===O(w).PENDING?(i(),m(E,{key:1,title:"确定要拒绝该账号吗？",onConfirm:$=>Y(s)},{default:n(()=>t[14]||(t[14]=[l("a",{class:"danger"},"拒绝",-1)])),_:2},1032,["onConfirm"])):_("",!0)]),_:2},1024)):_("",!0)]),_:1},8,["data-source","loading","pagination","row-selection"])]),o(ue,{open:k.value,"onUpdate:open":t[5]||(t[5]=a=>k.value=a),title:"拒绝原因",onOk:Z,confirmLoading:I.value},{default:n(()=>[o(se,{value:g.value,"onUpdate:value":t[4]||(t[4]=a=>g.value=a),placeholder:"请输入拒绝原因",rows:4},null,8,["value"])]),_:1},8,["open","confirmLoading"])])}}},Be=ie(Ae,[["__scopeId","data-v-2a79035d"]]);export{Be as default};
