import{_ as R,r as T,b as U,c as y,j as q,k as A,d as w,e as d,f as t,w as a,g as l,l as M,m as _,h as H,o as b,i as k,t as r,q as J,P as K,s as S,p as L,F as Q,v as W}from"./index-B__5RQXK.js";const X={class:"task content-container"},Y={class:"table-container"},Z={class:"table-header"},x={class:"left"},ee={class:"right"},te=["onClick"],ae={class:"danger"},oe={__name:"list",setup(se){const C=H(),f=T(!1),{t:n}=U(),s=y({taskGroupName:"",taskName:""}),F=q(()=>[{title:n("task.group.name"),dataIndex:"taskGroupName",key:"taskGroupName"},{title:n("task.group.statistics"),key:"statistics"},{title:n("task.group.createTime"),dataIndex:"createTime",key:"createTime",sorter:!0},{title:n("task.group.updateTime"),dataIndex:"updateTime",key:"updateTime",sorter:!0},{title:n("common.operation"),key:"action",fixed:"right",width:180}]),N=T([]),c=y({current:1,pageSize:10,total:0}),$=y({sorterField:void 0,sorterOrder:void 0}),G=()=>{c.current=1,m()},I=()=>{s.taskGroupName="",s.taskName="",G()},O=(e,o,u)=>{Object.assign(c,e),Object.assign($,{sorterField:u.field,sorterOrder:u.order}),m()},P=()=>{C.push("/taskGroup/create")},B=e=>{C.push(`/taskGroup/edit/${e.id}`)},D=async e=>{try{const o=await W("taskGroup.delete",{},{urlParams:{id:e.id}});o.code===0?(_.success(n("common.deleteSuccess")),m()):_.error(o.message)}catch{_.error(n("common.deleteFailed"))}},m=async()=>{f.value=!0;try{const e=await M("taskGroup.list",{page:c.current,pageSize:c.pageSize,...s,...$});e.code===0?(N.value=e.data.list,c.total=e.data.total):_.error(e.message)}finally{f.value=!1}};return A(async()=>{m()}),(e,o)=>{const u=l("a-input"),h=l("a-form-item"),g=l("a-button"),v=l("a-space"),V=l("a-form"),j=l("a-popconfirm"),z=l("a-table");return b(),w("div",X,[d("div",Y,[d("div",Z,[d("div",x,[t(V,{layout:"inline",model:s},{default:a(()=>[t(h,{label:e.$t("task.search.taskGroupName")},{default:a(()=>[t(u,{value:s.taskGroupName,"onUpdate:value":o[0]||(o[0]=i=>s.taskGroupName=i),placeholder:e.$t("common.inputPlaceholder"),"allow-clear":""},null,8,["value","placeholder"])]),_:1},8,["label"]),t(h,{label:e.$t("task.search.taskName")},{default:a(()=>[t(u,{value:s.taskName,"onUpdate:value":o[1]||(o[1]=i=>s.taskName=i),placeholder:e.$t("common.inputPlaceholder"),"allow-clear":""},null,8,["value","placeholder"])]),_:1},8,["label"]),t(h,null,{default:a(()=>[t(v,null,{default:a(()=>[t(g,{type:"primary",onClick:G},{default:a(()=>[k(r(e.$t("common.search")),1)]),_:1}),t(g,{onClick:I},{default:a(()=>[k(r(e.$t("common.reset")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),d("div",ee,[t(v,null,{default:a(()=>[t(g,{type:"primary",onClick:P},{icon:a(()=>[t(J(K))]),default:a(()=>[k(" "+r(e.$t("task.group.create")),1)]),_:1})]),_:1})])]),t(z,{columns:F.value,"data-source":N.value,loading:f.value,pagination:c,showSorterTooltip:!1,onChange:O},{bodyCell:a(({column:i,record:p})=>[i.key==="statistics"?(b(),w(Q,{key:0},[k(r(p.enrolledCount)+"/"+r(p.completedCount),1)],64)):S("",!0),i.key==="action"?(b(),L(v,{key:1},{default:a(()=>[d("a",{onClick:E=>B(p)},r(e.$t("common.edit")),9,te),t(j,{title:e.$t("common.deleteConfirm"),onConfirm:E=>D(p)},{default:a(()=>[d("a",ae,r(e.$t("common.delete")),1)]),_:2},1032,["title","onConfirm"])]),_:2},1024)):S("",!0)]),_:1},8,["columns","data-source","loading","pagination"])])])}}},le=R(oe,[["__scopeId","data-v-0256a715"]]);export{le as default};
