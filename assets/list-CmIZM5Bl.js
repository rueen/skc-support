import{_ as X,i as Y,r as E,a as R,b as k,d as i,c as e,w as t,e as l,f as Z,o as c,F as V,j as $,h as u,t as b,g as r,k as v,D as tt,P as et,l as h,M as at,m as y}from"./index-B8LRHCPB.js";import{T as g,g as nt,a as st,b as ot}from"./enums-C8EG5C38.js";const lt={class:"task content-container"},ct={class:"table-container"},dt={class:"table-header"},ut={class:"left"},it={class:"right"},rt=["onClick"],_t=["onClick"],mt={__name:"list",setup(pt){const T=Z(),{locale:A}=Y(),N=E(!1),o=R({taskName:"",channelId:void 0,status:void 0}),B=[{id:1,name:"抖音"},{id:2,name:"快手"}],j=[{title:"任务名称",dataIndex:"taskName",key:"taskName"},{title:"平台渠道",dataIndex:"channelName",key:"channelName"},{title:"任务状态",dataIndex:"status",key:"status"},{title:"创建时间",dataIndex:"createTime",key:"createTime"},{title:"操作",key:"action",fixed:"right",width:180}],x=E([{id:1,taskName:"测试任务1",channelName:"抖音",status:g.NOT_STARTED,createTime:"2024-03-01 10:00:00"}]),_=R({current:1,pageSize:10,total:0}),I=s=>nt(st,s,A.value),F=s=>ot[s],w=()=>{_.current=1,m()},L=()=>{o.taskName="",o.channelId=void 0,o.status=void 0,w()},U=s=>{Object.assign(_,s),m()},M=()=>{T.push("/task/create")},P=s=>{T.push(`/task/edit/${s.id}`)},z=s=>{T.push(`/task/view/${s.id}`)},q=async s=>{try{y.success("删除成功"),m()}catch{y.error("删除失败")}},G=()=>{at.confirm({title:"确认导出",content:"确定要导出当前筛选条件下的所有任务数据吗？",onOk:async()=>{try{const s={taskName:o.taskName,channelId:o.channelId};y.success("导出成功")}catch{y.error("导出失败")}}})},m=async()=>{N.value=!0;try{_.total=x.value.length}finally{N.value=!1}};return m(),(s,a)=>{const H=l("a-input"),p=l("a-form-item"),S=l("a-select-option"),D=l("a-select"),f=l("a-button"),C=l("a-space"),J=l("a-form"),K=l("a-tag"),Q=l("a-popconfirm"),W=l("a-table");return c(),k("div",lt,[i("div",ct,[i("div",dt,[i("div",ut,[e(J,{layout:"inline",model:o},{default:t(()=>[e(p,{label:"任务名称"},{default:t(()=>[e(H,{value:o.taskName,"onUpdate:value":a[0]||(a[0]=n=>o.taskName=n),placeholder:"请输入任务名称","allow-clear":""},null,8,["value"])]),_:1}),e(p,{label:"平台渠道"},{default:t(()=>[e(D,{value:o.channelId,"onUpdate:value":a[1]||(a[1]=n=>o.channelId=n),placeholder:"请选择平台渠道",style:{width:"120px"},"allow-clear":""},{default:t(()=>[(c(),k(V,null,$(B,n=>e(S,{key:n.id,value:n.id},{default:t(()=>[u(b(n.name),1)]),_:2},1032,["value"])),64))]),_:1},8,["value"])]),_:1}),e(p,{label:"任务状态"},{default:t(()=>[e(D,{value:o.status,"onUpdate:value":a[2]||(a[2]=n=>o.status=n),placeholder:"请选择状态",style:{width:"120px"},"allow-clear":""},{default:t(()=>[(c(!0),k(V,null,$(Object.values(r(g)),n=>(c(),v(S,{key:n,value:n},{default:t(()=>[u(b(I(n)),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1}),e(p,null,{default:t(()=>[e(C,null,{default:t(()=>[e(f,{type:"primary",onClick:w},{default:t(()=>a[3]||(a[3]=[u("查询")])),_:1}),e(f,{onClick:L},{default:t(()=>a[4]||(a[4]=[u("重置")])),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),i("div",it,[e(C,null,{default:t(()=>[e(f,{onClick:G},{icon:t(()=>[e(r(tt))]),default:t(()=>[a[5]||(a[5]=u(" 导出 "))]),_:1}),e(f,{type:"primary",onClick:M},{icon:t(()=>[e(r(et))]),default:t(()=>[a[6]||(a[6]=u(" 新建任务 "))]),_:1})]),_:1})])]),e(W,{columns:j,"data-source":x.value,loading:N.value,pagination:_,onChange:U},{bodyCell:t(({column:n,record:d})=>[n.key==="status"?(c(),v(K,{key:0,color:F(d.status)},{default:t(()=>[u(b(I(d.status)),1)]),_:2},1032,["color"])):h("",!0),n.key==="action"?(c(),v(C,{key:1},{default:t(()=>[i("a",{onClick:O=>z(d)},"查看",8,rt),d.status===r(g).NOT_STARTED?(c(),k("a",{key:0,onClick:O=>P(d)},"编辑",8,_t)):h("",!0),d.status===r(g).NOT_STARTED?(c(),v(Q,{key:1,title:"确定要删除该任务吗？",onConfirm:O=>q(d)},{default:t(()=>a[7]||(a[7]=[i("a",{class:"danger"},"删除",-1)])),_:2},1032,["onConfirm"])):h("",!0)]),_:2},1024)):h("",!0)]),_:1},8,["data-source","loading","pagination"])])])}}},vt=X(mt,[["__scopeId","data-v-f574bcdf"]]);export{vt as default};
