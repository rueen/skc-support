import{_ as J,r,a as w,n as Q,b as x,d as c,c as t,w as n,e as s,o as b,h as I,t as U,l as T,k as X,g as Y,P as Z,m as _}from"./index-BWJIX9Ry.js";const ee={class:"channel content-container"},ae={class:"table-container"},te={class:"table-header"},ne={class:"left"},oe={class:"right"},le=["src"],se=["onClick"],ie=["onClick"],ce={key:0},de={__name:"index",setup(re){const h=r(!1),d=r(!1),k=r(!1),i=r("add"),D=r(),u=r([]),v=w({name:""}),l=w({name:"",icon:""}),$={name:[{required:!0,message:"请输入渠道名称"}],icon:[{required:!0,message:"请上传渠道图标"}]},N=[{title:"渠道图标",dataIndex:"icon",key:"icon",width:100},{title:"渠道名称",dataIndex:"name",key:"name"},{title:"创建时间",dataIndex:"createTime",key:"createTime"},{title:"操作",key:"action",width:200}],L=r([{id:1,name:"抖音",icon:"https://p3-pc.douyinpic.com/img/aweme-avatar/tos-cn-avt-0015_4c70b5c61a4c675c57f71de7cc7d27c1~c5_300x300.jpeg?from=2956013662",createTime:"2024-02-28 10:00:00"},{id:2,name:"快手",icon:"https://static.yximgs.com/udata/pkg/IS-DOCS-KWAIPIC/kwai_brand_logo.png",createTime:"2024-02-28 11:00:00"}]),f=w({current:1,pageSize:10,total:0}),M=Q(()=>({add:"添加渠道",edit:"编辑渠道",view:"查看渠道"})[i.value]),V=()=>{f.current=1,m()},P=()=>{v.name="",V()},R=e=>{Object.assign(f,e),m()},j=()=>{i.value="add",l.name="",l.icon="",u.value=[],d.value=!0},q=e=>{i.value="edit",l.name=e.name,l.icon=e.icon,u.value=[{uid:"-1",name:"image.png",status:"done",url:e.icon}],d.value=!0},z=e=>{i.value="view",l.name=e.name,l.icon=e.icon,u.value=[{uid:"-1",name:"image.png",status:"done",url:e.icon}],d.value=!0},A=async e=>{try{_.success("删除成功"),m()}catch{_.error("删除失败")}},E=e=>{const a=e.type.startsWith("image/");a||_.error("只能上传图片文件！");const p=e.size/1024/1024<2;return p||_.error("图片必须小于 2MB！"),a&&p},W=async()=>{if(i.value==="view"){d.value=!1;return}try{await D.value.validate(),k.value=!0,_.success(i.value==="add"?"添加成功":"编辑成功"),d.value=!1,m()}catch(e){console.error(e)}finally{k.value=!1}},m=async()=>{h.value=!0;try{f.total=L.value.length}finally{h.value=!1}};return m(),(e,a)=>{const p=s("a-input"),g=s("a-form-item"),C=s("a-button"),B=s("a-space"),O=s("a-form"),F=s("a-popconfirm"),K=s("a-table"),G=s("a-upload"),H=s("a-modal");return b(),x("div",ee,[c("div",ae,[c("div",te,[c("div",ne,[t(O,{layout:"inline",model:v},{default:n(()=>[t(g,{label:"渠道名称"},{default:n(()=>[t(p,{value:v.name,"onUpdate:value":a[0]||(a[0]=o=>v.name=o),placeholder:"请输入渠道名称","allow-clear":""},null,8,["value"])]),_:1}),t(g,null,{default:n(()=>[t(B,null,{default:n(()=>[t(C,{type:"primary",onClick:V},{default:n(()=>[I(U(e.$t("common.search")),1)]),_:1}),t(C,{onClick:P},{default:n(()=>[I(U(e.$t("common.reset")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),c("div",oe,[t(C,{type:"primary",onClick:j},{default:n(()=>a[4]||(a[4]=[I(" 添加渠道 ")])),_:1})])]),t(K,{columns:N,"data-source":L.value,loading:h.value,pagination:f,onChange:R},{bodyCell:n(({column:o,record:y})=>[o.key==="icon"?(b(),x("img",{key:0,src:y.icon,alt:"渠道图标",class:"channel-icon"},null,8,le)):T("",!0),o.key==="action"?(b(),X(B,{key:1},{default:n(()=>[c("a",{onClick:S=>z(y)},"查看",8,se),c("a",{onClick:S=>q(y)},"编辑",8,ie),t(F,{title:"确定要删除该渠道吗？",onConfirm:S=>A(y)},{default:n(()=>a[5]||(a[5]=[c("a",{class:"danger"},"删除",-1)])),_:2},1032,["onConfirm"])]),_:2},1024)):T("",!0)]),_:1},8,["data-source","loading","pagination"])]),t(H,{visible:d.value,"onUpdate:visible":a[3]||(a[3]=o=>d.value=o),title:M.value,confirmLoading:k.value,onOk:W},{default:n(()=>[t(O,{ref_key:"formRef",ref:D,model:l,rules:$,"label-col":{span:6},"wrapper-col":{span:16}},{default:n(()=>[t(g,{label:"渠道图标",name:"icon"},{default:n(()=>[t(G,{"file-list":u.value,"onUpdate:fileList":a[1]||(a[1]=o=>u.value=o),"before-upload":E,accept:"image/*","list-type":"picture-card","max-count":1,disabled:i.value==="view"},{default:n(()=>[u.value.length?T("",!0):(b(),x("div",ce,[t(Y(Z)),a[6]||(a[6]=c("div",{style:{"margin-top":"8px"}},"上传",-1))]))]),_:1},8,["file-list","disabled"])]),_:1}),t(g,{label:"渠道名称",name:"name"},{default:n(()=>[t(p,{value:l.name,"onUpdate:value":a[2]||(a[2]=o=>l.name=o),placeholder:"请输入渠道名称",disabled:i.value==="view"},null,8,["value","disabled"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible","title","confirmLoading"])])}}},me=J(de,[["__scopeId","data-v-2f8a1cdb"]]);export{me as default};
