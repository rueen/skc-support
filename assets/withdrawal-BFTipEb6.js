import{_ as W,r,a as I,b as X,d,c as t,w as n,e as o,o as b,h as u,t as C,g as Y,D as Z,k as T,l as B,m as l}from"./index-BWJIX9Ry.js";const ee={class:"withdrawal content-container"},ae={class:"table-container"},te={class:"table-header"},ne={class:"left"},oe={class:"right"},le=["onClick"],se={__name:"withdrawal",setup(re){const y=r(!1),S=r(null),c=r([]),m=r(!1),h=r(!1),p=r(""),f=I({memberName:""}),D=[{title:"会员名称",dataIndex:"memberName",key:"memberName"},{title:"提现账户",dataIndex:"account",key:"account"},{title:"申请提现金额",dataIndex:"amount",key:"amount",align:"right"},{title:"真实姓名",dataIndex:"realName",key:"realName"},{title:"申请时间",dataIndex:"createTime",key:"createTime"},{title:"状态",dataIndex:"status",key:"status"},{title:"操作",key:"action",width:150}],w=r([{id:1,memberName:"张三",account:"6222021234567890123",amount:1e3,realName:"张三",createTime:"2024-02-28 10:00:00",status:"pending"},{id:2,memberName:"李四",account:"6222021234567890124",amount:2e3,realName:"李四",createTime:"2024-02-28 11:00:00",status:"paid"}]),v=I({current:1,pageSize:10,total:0}),V=a=>({pending:"待处理",paid:"已打款",failed:"打款失败"})[a]||a,F=a=>({pending:"warning",paid:"success",failed:"error"})[a],N=()=>{v.current=1,i()},R=()=>{f.memberName="",N()},$=a=>{Object.assign(v,a),i()},L=a=>{c.value=a},O=()=>{l.success("导出成功")},U=async a=>{try{l.success("操作成功"),i()}catch{l.error("操作失败")}},E=async()=>{if(!c.value.length){l.warning("请选择要操作的记录");return}try{l.success("操作成功"),c.value=[],i()}catch{l.error("操作失败")}},K=a=>{S.value=a,p.value="",m.value=!0},P=()=>{if(!c.value.length){l.warning("请选择要操作的记录");return}p.value="",m.value=!0},j=async()=>{if(!p.value){l.error("请输入打款失败原因");return}try{h.value=!0,l.success("操作成功"),m.value=!1,c.value=[],i()}catch{l.error("操作失败")}finally{h.value=!1}},i=async()=>{y.value=!0;try{v.total=w.value.length}finally{y.value=!1}};return i(),(a,e)=>{const z=o("a-input"),x=o("a-form-item"),_=o("a-button"),k=o("a-space"),q=o("a-form"),A=o("a-tag"),G=o("a-popconfirm"),H=o("a-table"),J=o("a-textarea"),M=o("a-modal");return b(),X("div",ee,[d("div",ae,[d("div",te,[d("div",ne,[t(q,{layout:"inline",model:f},{default:n(()=>[t(x,{label:"会员名称"},{default:n(()=>[t(z,{value:f.memberName,"onUpdate:value":e[0]||(e[0]=s=>f.memberName=s),placeholder:"请输入会员名称","allow-clear":""},null,8,["value"])]),_:1}),t(x,null,{default:n(()=>[t(k,null,{default:n(()=>[t(_,{type:"primary",onClick:N},{default:n(()=>[u(C(a.$t("common.search")),1)]),_:1}),t(_,{onClick:R},{default:n(()=>[u(C(a.$t("common.reset")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),d("div",oe,[t(k,null,{default:n(()=>[t(_,{type:"primary",onClick:O},{icon:n(()=>[t(Y(Z))]),default:n(()=>[e[3]||(e[3]=u(" 导出 "))]),_:1}),t(_,{type:"primary",onClick:E},{default:n(()=>e[4]||(e[4]=[u("批量已打款")])),_:1}),t(_,{danger:"",onClick:P},{default:n(()=>e[5]||(e[5]=[u("批量打款失败")])),_:1})]),_:1})])]),t(H,{columns:D,"data-source":w.value,loading:y.value,pagination:v,"row-selection":{selectedRowKeys:c.value,onChange:L},onChange:$},{bodyCell:n(({column:s,record:g})=>[s.key==="status"?(b(),T(A,{key:0,color:F(g.status)},{default:n(()=>[u(C(V(g.status)),1)]),_:2},1032,["color"])):B("",!0),s.key==="action"?(b(),T(k,{key:1},{default:n(()=>[t(G,{title:"确定要标记为已打款吗？",onConfirm:Q=>U(g)},{default:n(()=>e[6]||(e[6]=[d("a",null,"已打款",-1)])),_:2},1032,["onConfirm"]),d("a",{class:"danger",onClick:Q=>K(g)},"打款失败",8,le)]),_:2},1024)):B("",!0)]),_:1},8,["data-source","loading","pagination","row-selection"])]),t(M,{open:m.value,"onUpdate:open":e[2]||(e[2]=s=>m.value=s),title:"打款失败原因",onOk:j,confirmLoading:h.value},{default:n(()=>[t(J,{value:p.value,"onUpdate:value":e[1]||(e[1]=s=>p.value=s),placeholder:"请输入打款失败原因",rows:4},null,8,["value"])]),_:1},8,["open","confirmLoading"])])}}},ie=W(se,[["__scopeId","data-v-9f7c8f93"]]);export{ie as default};
