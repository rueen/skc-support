import{_ as J,i as K,r as W,n as X,p as Y,a as Z,q as ee,b as p,c as e,d as k,w as l,e as d,f as ae,o as s,k as g,l as L,F as f,j as c,h as r,t as y,g as R,P as te,m as le}from"./index-BWJIX9Ry.js";import{P as ne}from"./index-C-q3quJN.js";import{C as ue,c as de,g as P,d as oe,e as se}from"./enums-BPwUO9LS.js";const re={class:"task-form content-container"},ie={class:"form-container"},pe={class:"group-select"},me={class:"custom-fields"},ve={__name:"detail",setup(fe){const x=Y(),F=ae(),{locale:N}=K(),O=W(),o=X(()=>x.name==="TaskEdit"),n=Z({taskName:"",channelId:void 0,categoryId:void 0,type:void 0,reward:void 0,brand:"",groupIds:[],customFields:[{title:"",type:"input"}],startTime:null,endTime:null,quota:void 0,unlimitedQuota:!0,fansRequired:void 0,contentRequirement:"",taskInfo:"",notice:`1.请尽快完成发布，填写发布链接。
2.任务结束后无法填写，不能结算。
3.发布内容不符合要求，将无法审核通过。
4.填写链接无法访问或其他无关链接，视为放弃结算。`}),Q={taskName:[{required:!0,message:"请输入任务名称"}],channelId:[{required:!0,message:"请选择平台渠道"}],categoryId:[{required:!0,message:"请选择达人领域"}],type:[{required:!0,message:"请选择任务类型"}],reward:[{required:!0,message:"请输入任务奖励"}],fansRequired:[{required:!0,message:"请输入粉丝要求"}]},V=[{id:1,name:"抖音"},{id:2,name:"快手"}],j=[{id:1,name:"群组1"},{id:2,name:"群组2"},{id:3,name:"群组3"}],D=()=>{n.customFields.length<10&&n.customFields.push({title:"",type:"input"})},E=i=>{n.customFields.splice(i,1)},h=i=>P(oe,i,N.value),S=i=>P(se,i,N.value),z=()=>{O.value.validate().then(()=>{le.success("提交成功"),F.push("/task/list")})},H=()=>{F.back()},M=async i=>{};return ee(()=>{o.value&&M(x.params.id)}),(i,t)=>{const q=d("a-input"),u=d("a-form-item"),m=d("a-select-option"),v=d("a-select"),I=d("a-input-number"),_=d("a-button"),T=d("a-space"),B=d("a-date-picker"),w=d("a-col"),$=d("a-row"),A=d("a-checkbox"),U=d("a-textarea"),G=d("a-form");return s(),p("div",re,[e(ne,{title:o.value?"编辑任务":"新建任务",back:!0,class:"page-header"},null,8,["title"]),k("div",ie,[e(G,{ref_key:"formRef",ref:O,model:n,rules:Q,"label-col":{span:3},"wrapper-col":{span:20},layout:"horizontal"},{default:l(()=>[e(u,{label:"任务名称",name:"taskName"},{default:l(()=>[e(q,{value:n.taskName,"onUpdate:value":t[0]||(t[0]=a=>n.taskName=a),placeholder:"请输入任务名称"},null,8,["value"])]),_:1}),e(u,{label:"平台渠道",name:"channelId"},{default:l(()=>[e(v,{value:n.channelId,"onUpdate:value":t[1]||(t[1]=a=>n.channelId=a),placeholder:"请选择平台渠道"},{default:l(()=>[(s(),p(f,null,c(V,a=>e(m,{key:a.id,value:a.id},{default:l(()=>[r(y(a.name),1)]),_:2},1032,["value"])),64))]),_:1},8,["value"])]),_:1}),e(u,{label:"达人领域",name:"categoryId"},{default:l(()=>[e(v,{value:n.categoryId,"onUpdate:value":t[2]||(t[2]=a=>n.categoryId=a),placeholder:"请选择达人领域"},{default:l(()=>[(s(!0),p(f,null,c(Object.values(R(ue)),a=>(s(),g(m,{key:a,value:a},{default:l(()=>[r(y(h(a)),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1}),e(u,{label:"任务类型",name:"type"},{default:l(()=>[e(v,{value:n.type,"onUpdate:value":t[3]||(t[3]=a=>n.type=a),placeholder:"请选择任务类型"},{default:l(()=>[(s(!0),p(f,null,c(Object.values(R(de)),a=>(s(),g(m,{key:a,value:a},{default:l(()=>[r(y(S(a)),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1}),e(u,{label:"任务奖励",name:"reward"},{default:l(()=>[e(I,{value:n.reward,"onUpdate:value":t[4]||(t[4]=a=>n.reward=a),min:0,precision:2,step:.1,placeholder:"请输入任务奖励","addon-after":"元"},null,8,["value"])]),_:1}),e(u,{label:"品牌",name:"brand"},{default:l(()=>[e(q,{value:n.brand,"onUpdate:value":t[5]||(t[5]=a=>n.brand=a),placeholder:"请输入品牌名称"},null,8,["value"])]),_:1}),e(u,{label:"指定群组",name:"groupIds"},{default:l(()=>[k("div",pe,[e(v,{value:n.groupIds,"onUpdate:value":t[6]||(t[6]=a=>n.groupIds=a),mode:"multiple",placeholder:"请选择指定群组"},{default:l(()=>[(s(),p(f,null,c(j,a=>e(m,{key:a.id,value:a.id},{default:l(()=>[r(y(a.name),1)]),_:2},1032,["value"])),64))]),_:1},8,["value"])])]),_:1}),e(u,{label:"自定义字段"},{default:l(()=>[k("div",me,[(s(!0),p(f,null,c(n.customFields,(a,C)=>(s(),p("div",{key:C,class:"field-item"},[e(T,{align:"baseline"},{default:l(()=>[e(u,{name:["customFields",C,"title"],rules:[{required:!0,message:"请输入字段标题"}]},{default:l(()=>[e(q,{value:a.title,"onUpdate:value":b=>a.title=b,placeholder:"请输入字段标题"},null,8,["value","onUpdate:value"])]),_:2},1032,["name"]),e(v,{value:a.type,"onUpdate:value":b=>a.type=b,style:{width:"120px"}},{default:l(()=>[e(m,{value:"input"},{default:l(()=>t[15]||(t[15]=[r("输入框")])),_:1}),e(m,{value:"image"},{default:l(()=>t[16]||(t[16]=[r("上传图片")])),_:1})]),_:2},1032,["value","onUpdate:value"]),e(_,{type:"link",danger:"",onClick:b=>E(C)},{default:l(()=>t[17]||(t[17]=[r(" 删除 ")])),_:2},1032,["onClick"])]),_:2},1024)]))),128)),n.customFields.length<10?(s(),g(_,{key:0,type:"dashed",block:"",onClick:D},{default:l(()=>[e(R(te)),t[18]||(t[18]=r("添加字段 "))]),_:1})):L("",!0)])]),_:1}),e(u,{label:"任务时间",required:""},{default:l(()=>[e($,{gutter:8},{default:l(()=>[e(w,{span:11},{default:l(()=>[e(u,{name:"startTime",rules:[{required:!0,message:"请选择开始时间"}],disabled:o.value},{default:l(()=>[e(B,{value:n.startTime,"onUpdate:value":t[7]||(t[7]=a=>n.startTime=a),"show-time":"",style:{width:"100%"},placeholder:"开始时间"},null,8,["value"])]),_:1},8,["disabled"])]),_:1}),e(w,{span:2,class:"text-center"},{default:l(()=>t[19]||(t[19]=[k("span",null,"至",-1)])),_:1}),e(w,{span:11},{default:l(()=>[e(u,{name:"endTime",rules:[{required:!0,message:"请选择结束时间"}],disabled:o.value},{default:l(()=>[e(B,{value:n.endTime,"onUpdate:value":t[8]||(t[8]=a=>n.endTime=a),"show-time":"",style:{width:"100%"},placeholder:"结束时间"},null,8,["value"])]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1}),e(u,{label:"任务名额"},{default:l(()=>[e(T,{align:"baseline"},{default:l(()=>[e(u,{name:"quota"},{default:l(()=>[e(I,{value:n.quota,"onUpdate:value":t[9]||(t[9]=a=>n.quota=a),min:0,precision:0,disabled:n.unlimitedQuota||o.value,placeholder:"请输入任务名额"},null,8,["value","disabled"])]),_:1}),e(A,{checked:n.unlimitedQuota,"onUpdate:checked":t[10]||(t[10]=a=>n.unlimitedQuota=a),disabled:o.value},{default:l(()=>t[20]||(t[20]=[r(" 不限制 ")])),_:1},8,["checked","disabled"])]),_:1})]),_:1}),e(u,{label:"粉丝要求",name:"fansRequired"},{default:l(()=>[e(I,{value:n.fansRequired,"onUpdate:value":t[11]||(t[11]=a=>n.fansRequired=a),min:0,precision:0,step:1e3,placeholder:"请输入最低粉丝数要求","addon-after":"粉丝",disabled:o.value},null,8,["value","disabled"])]),_:1}),e(u,{label:"作品要求",name:"contentRequirement"},{default:l(()=>[e(U,{value:n.contentRequirement,"onUpdate:value":t[12]||(t[12]=a=>n.contentRequirement=a),rows:4,placeholder:"请输入作品要求",disabled:o.value},null,8,["value","disabled"])]),_:1}),e(u,{label:"任务信息",name:"taskInfo"},{default:l(()=>[e(U,{value:n.taskInfo,"onUpdate:value":t[13]||(t[13]=a=>n.taskInfo=a),rows:4,placeholder:"请输入任务信息",disabled:o.value},null,8,["value","disabled"])]),_:1}),e(u,{label:"温馨提示",name:"notice"},{default:l(()=>[e(U,{value:n.notice,"onUpdate:value":t[14]||(t[14]=a=>n.notice=a),rows:4,placeholder:"请输入温馨提示",disabled:o.value},null,8,["value","disabled"])]),_:1}),o.value?L("",!0):(s(),g(u,{key:0,"wrapper-col":{span:16,offset:4}},{default:l(()=>[e(T,null,{default:l(()=>[e(_,{type:"primary",onClick:z},{default:l(()=>t[21]||(t[21]=[r("提交")])),_:1}),e(_,{onClick:H},{default:l(()=>t[22]||(t[22]=[r("取消")])),_:1})]),_:1})]),_:1}))]),_:1},8,["model"])])])}}},ke=J(ve,[["__scopeId","data-v-884b5d21"]]);export{ke as default};
