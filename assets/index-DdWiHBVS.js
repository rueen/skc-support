import{_ as N,u as V,a as I,b as P,c as j,r as x,d as M,e as T,f as S,g as i,h as s,t as c,w as t,i as a,j as A,o as h,k as v,F as G,l as H,m as J,n as K,s as O}from"./index-BJg42wI2.js";const Q={class:"login-container"},W={class:"login-box"},X={class:"login-title"},Y={class:"language-switch"},Z={__name:"index",setup(ee){const d=A(),b=V(),w=I(),C=P(),{t:k,locale:$}=j(),L=x(),f=x(!1),R=C.languageColumns,q=M(()=>{var e;return(e=R.find(o=>o.value===$.value))==null?void 0:e.value}),z=e=>{const o=e.target.value;O(o)},l=T({username:"",password:"",remember:!0}),B={username:[{required:!0,message:k("login.usernameRequired")}],password:[{required:!0,message:k("login.passwordRequired")}]},E=async e=>{try{f.value=!0;const o={username:e.username,password:e.password};await b.login(o),w.resetEnum(),await w.fetchEnum();const u=d.getRoutes().find(n=>n.path==="/");if(u&&u.children){const n=u.children.filter(m=>{var _,g;const p=(_=m.meta)==null?void 0:_.permissions;return!((g=m.meta)!=null&&g.hidden)&&p&&b.hasPermissions(p)});n.length>0?d.push(n[0].path):d.push("/")}else d.push("/")}catch(o){console.error(o)}finally{f.value=!1}};return(e,o)=>{const y=a("user-outlined"),u=a("a-input"),n=a("a-form-item"),m=a("lock-outlined"),p=a("a-input-password"),_=a("a-checkbox"),g=a("a-button"),U=a("a-form"),D=a("a-radio-button"),F=a("a-radio-group");return h(),S("div",Q,[i("div",W,[i("div",X,[i("h1",null,c(e.$t("app.title")),1),i("p",null,c(e.$t("login.title")),1)]),s(U,{ref_key:"formRef",ref:L,model:l,rules:B,onFinish:E},{default:t(()=>[s(n,{name:"username"},{default:t(()=>[s(u,{value:l.username,"onUpdate:value":o[0]||(o[0]=r=>l.username=r),size:"large",placeholder:e.$t("login.username")},{prefix:t(()=>[s(y)]),_:1},8,["value","placeholder"])]),_:1}),s(n,{name:"password"},{default:t(()=>[s(p,{value:l.password,"onUpdate:value":o[1]||(o[1]=r=>l.password=r),size:"large",placeholder:e.$t("login.password")},{prefix:t(()=>[s(m)]),_:1},8,["value","placeholder"])]),_:1}),s(n,null,{default:t(()=>[s(_,{checked:l.remember,"onUpdate:checked":o[2]||(o[2]=r=>l.remember=r)},{default:t(()=>[v(c(e.$t("login.rememberMe")),1)]),_:1},8,["checked"])]),_:1}),s(n,null,{default:t(()=>[s(g,{type:"primary","html-type":"submit",size:"large",loading:f.value,block:""},{default:t(()=>[v(c(e.$t("login.login")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"]),i("div",Y,[s(F,{value:q.value,"button-style":"solid",size:"small",onChange:z},{default:t(()=>[(h(!0),S(G,null,H(J(R),r=>(h(),K(D,{value:r.value},{default:t(()=>[v(c(r.text),1)]),_:2},1032,["value"]))),256))]),_:1},8,["value"])])])])}}},se=N(Z,[["__scopeId","data-v-78b535ca"]]);export{se as default};
